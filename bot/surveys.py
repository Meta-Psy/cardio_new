"""
–ú–æ–¥—É–ª—å —Å –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏
–í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—Å–µ —Ç–µ—Å—Ç—ã, –∏—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–∏—Å–∫–æ–≤
"""

from datetime import datetime
from typing import Dict, List, Any, Tuple

# ============================================================================
# –ö–û–ù–°–¢–ê–ù–¢–´ –ò –ù–ê–°–¢–†–û–ô–ö–ò
# ============================================================================

# –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤
TEST_NORMS = {
    'hads_anxiety': {
        '–Ω–æ—Ä–º–∞': (0, 7),
        '—Å—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è': (8, 10), 
        '–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è': (11, 21)
    },
    'hads_depression': {
        '–Ω–æ—Ä–º–∞': (0, 7),
        '—Å—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è': (8, 10),
        '–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è': (11, 21)
    },
    'burns': {
        '–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è': (0, 5),
        '–ª–µ–≥–∫–∞—è': (6, 10),
        '—É–º–µ—Ä–µ–Ω–Ω–∞—è': (11, 25),
        '—Ç—è–∂–µ–ª–∞—è': (26, 50),
        '–∫—Ä–∞–π–Ω–µ_—Ç—è–∂–µ–ª–∞—è': (51, 100)
    },
    'isi': {
        '–Ω–µ—Ç_–±–µ—Å—Å–æ–Ω–Ω–∏—Ü—ã': (0, 7),
        '–ø–æ–¥–ø–æ—Ä–æ–≥–æ–≤–∞—è': (8, 14),
        '—É–º–µ—Ä–µ–Ω–Ω–∞—è': (15, 21),
        '—Ç—è–∂–µ–ª–∞—è': (22, 28)
    },
    'stop_bang': {
        '–Ω–∏–∑–∫–∏–π': (0, 2),
        '—É–º–µ—Ä–µ–Ω–Ω—ã–π': (3, 4),
        '–≤—ã—Å–æ–∫–∏–π': (5, 8)
    },
    'ess': {
        '–Ω–æ—Ä–º–∞': (0, 10),
        '–ª–µ–≥–∫–∞—è': (11, 12),
        '—É–º–µ—Ä–µ–Ω–Ω–∞—è': (13, 15),
        '–≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è': (16, 24)
    },
    'fagerstrom': {
        '–æ—á–µ–Ω—å_—Å–ª–∞–±–∞—è': (0, 2),
        '—Å–ª–∞–±–∞—è': (3, 4),
        '—Å—Ä–µ–¥–Ω—è—è': (5, 6),
        '—Å–∏–ª—å–Ω–∞—è': (7, 8),
        '–æ—á–µ–Ω—å_—Å–∏–ª—å–Ω–∞—è': (9, 10)
    },
    'audit': {
        '–Ω–∏–∑–∫–∏–π': (0, 7),
        '–æ–ø–∞—Å–Ω–æ–µ': (8, 15),
        '–≤—Ä–µ–¥–Ω–æ–µ': (16, 19),
        '–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å': (20, 40)
    }
}

# ============================================================================
# –°–¢–†–£–ö–¢–£–†–´ –î–ê–ù–ù–´–• –¢–ï–°–¢–û–í
# ============================================================================

def get_hads_questions() -> List[Dict]:
    """HADS - –ì–æ—Å–ø–∏—Ç–∞–ª—å–Ω–∞—è —à–∫–∞–ª–∞ —Ç—Ä–µ–≤–æ–≥–∏ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏"""
    return [
        {
            "id": 1,
            "text": "–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω–æ—Å—Ç—å, –º–Ω–µ –Ω–µ –ø–æ —Å–µ–±–µ",
            "type": "anxiety",
            "options": [
                {"text": "–≤—Å—ë –≤—Ä–µ–º—è", "score": 3},
                {"text": "—á–∞—Å—Ç–æ", "score": 2},
                {"text": "–≤—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏, –∏–Ω–æ–≥–¥–∞", "score": 1},
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é", "score": 0}
            ]
        },
        {
            "id": 2,
            "text": "–¢–æ, —á—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏–ª–æ –º–Ω–µ –±–æ–ª—å—à–æ–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ, –∏ —Å–µ–π—á–∞—Å –≤—ã–∑—ã–≤–∞–µ—Ç —É –º–µ–Ω—è —Ç–∞–∫–æ–µ –∂–µ —á—É–≤—Å—Ç–≤–æ",
            "type": "depression",
            "options": [
                {"text": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫", "score": 0},
                {"text": "–Ω–∞–≤–µ—Ä–Ω–æ–µ, —ç—Ç–æ —Ç–∞–∫", "score": 1},
                {"text": "–ª–∏—à—å –≤ –æ—á–µ–Ω—å –º–∞–ª–æ–π —Å—Ç–µ–ø–µ–Ω–∏ —ç—Ç–æ —Ç–∞–∫", "score": 2},
                {"text": "—ç—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ —Ç–∞–∫", "score": 3}
            ]
        },
        {
            "id": 3,
            "text": "–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é —Å—Ç—Ä–∞—Ö, –∫–∞–∂–µ—Ç—Å—è, –±—É–¥—Ç–æ —á—Ç–æ-—Ç–æ —É–∂–∞—Å–Ω–æ–µ –º–æ–∂–µ—Ç –≤–æ—Ç-–≤–æ—Ç —Å–ª—É—á–∏—Ç—å—Å—è",
            "type": "anxiety",
            "options": [
                {"text": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫, –∏ —Å—Ç—Ä–∞—Ö –æ—á–µ–Ω—å –≤–µ–ª–∏–∫", "score": 3},
                {"text": "–¥–∞, —ç—Ç–æ —Ç–∞–∫, –Ω–æ —Å—Ç—Ä–∞—Ö –Ω–µ –æ—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π", "score": 2},
                {"text": "–∏–Ω–æ–≥–¥–∞, –Ω–æ —ç—Ç–æ –º–µ–Ω—è –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç", "score": 1},
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é", "score": 0}
            ]
        },
        {
            "id": 4,
            "text": "–Ø —Å–ø–æ—Å–æ–±–µ–Ω —Ä–∞—Å—Å–º–µ—è—Ç—å—Å—è –∏ —É–≤–∏–¥–µ—Ç—å –≤ —Ç–æ–º –∏–ª–∏ –∏–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏ —Å–º–µ—à–Ω–æ–µ",
            "type": "depression",
            "options": [
                {"text": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫", "score": 0},
                {"text": "–Ω–∞–≤–µ—Ä–Ω–æ–µ, —ç—Ç–æ —Ç–∞–∫", "score": 1},
                {"text": "–ª–∏—à—å –≤ –æ—á–µ–Ω—å –º–∞–ª–æ–π —Å—Ç–µ–ø–µ–Ω–∏ —ç—Ç–æ —Ç–∞–∫", "score": 2},
                {"text": "—ç—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ —Ç–∞–∫", "score": 3}
            ]
        },
        {
            "id": 5,
            "text": "–ë–µ—Å–ø–æ–∫–æ–π–Ω—ã–µ –º—ã—Å–ª–∏ –∫—Ä—É—Ç—è—Ç—Å—è —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ",
            "type": "anxiety",
            "options": [
                {"text": "–ø–æ—Å—Ç–æ—è–Ω–Ω–æ", "score": 3},
                {"text": "–±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏", "score": 2},
                {"text": "–≤—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–µ —Ç–∞–∫ —á–∞—Å—Ç–æ", "score": 1},
                {"text": "—Ç–æ–ª—å–∫–æ –∏–Ω–æ–≥–¥–∞", "score": 0}
            ]
        },
        {
            "id": 6,
            "text": "–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –±–æ–¥—Ä–æ—Å—Ç—å",
            "type": "depression",
            "options": [
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é", "score": 3},
                {"text": "–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ", "score": 2},
                {"text": "–∏–Ω–æ–≥–¥–∞", "score": 1},
                {"text": "–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å—ë –≤—Ä–µ–º—è", "score": 0}
            ]
        },
        {
            "id": 7,
            "text": "–Ø –ª–µ–≥–∫–æ –º–æ–≥—É —Å–µ—Å—Ç—å –∏ —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è",
            "type": "anxiety",
            "options": [
                {"text": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫", "score": 0},
                {"text": "–Ω–∞–≤–µ—Ä–Ω–æ, —ç—Ç–æ —Ç–∞–∫", "score": 1},
                {"text": "–ª–∏—à—å –∏–∑—Ä–µ–¥–∫–∞ —ç—Ç–æ —Ç–∞–∫", "score": 2},
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ –º–æ–≥—É", "score": 3}
            ]
        },
        {
            "id": 8,
            "text": "–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è –≤—Å—ë —Å—Ç–∞–ª –¥–µ–ª–∞—Ç—å –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ",
            "type": "depression",
            "options": [
                {"text": "–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å—ë –≤—Ä–µ–º—è", "score": 3},
                {"text": "—á–∞—Å—Ç–æ", "score": 2},
                {"text": "–∏–Ω–æ–≥–¥–∞", "score": 1},
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 9,
            "text": "–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏–ª–∏ –¥—Ä–æ–∂—å",
            "type": "anxiety",
            "options": [
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é", "score": 0},
                {"text": "–∏–Ω–æ–≥–¥–∞", "score": 1},
                {"text": "—á–∞—Å—Ç–æ", "score": 2},
                {"text": "–æ—á–µ–Ω—å —á–∞—Å—Ç–æ", "score": 3}
            ]
        },
        {
            "id": 10,
            "text": "–Ø –Ω–µ —Å–ª–µ–∂—É –∑–∞ —Å–≤–æ–µ–π –≤–Ω–µ—à–Ω–æ—Å—Ç—å—é",
            "type": "depression",
            "options": [
                {"text": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫", "score": 3},
                {"text": "—è –Ω–µ —É–¥–µ–ª—è—é —ç—Ç–æ–º—É —Å—Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ", "score": 2},
                {"text": "–º–æ–∂–µ—Ç –±—ã—Ç—å, —è —Å—Ç–∞–ª –º–µ–Ω—å—à–µ —É–¥–µ–ª—è—Ç—å —ç—Ç–æ–º—É –≤–Ω–∏–º–∞–Ω–∏—è", "score": 1},
                {"text": "—è —Å–ª–µ–∂—É –∑–∞ —Å–æ–±–æ–π —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ", "score": 0}
            ]
        },
        {
            "id": 11,
            "text": "–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –Ω–µ—É—Å–∏–¥—á–∏–≤–æ—Å—Ç—å, —Å–ª–æ–≤–Ω–æ –º–Ω–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω—É–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è",
            "type": "anxiety",
            "options": [
                {"text": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫", "score": 3},
                {"text": "–Ω–∞–≤–µ—Ä–Ω–æ, —ç—Ç–æ —Ç–∞–∫", "score": 2},
                {"text": "–ª–∏—à—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å—Ç–µ–ø–µ–Ω–∏ —ç—Ç–æ —Ç–∞–∫", "score": 1},
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é", "score": 0}
            ]
        },
        {
            "id": 12,
            "text": "–Ø —Å—á–∏—Ç–∞—é, —á—Ç–æ –º–æ–∏ –¥–µ–ª–∞ (–∑–∞–Ω—è—Ç–∏—è, —É–≤–ª–µ—á–µ–Ω–∏—è) –º–æ–≥—É—Ç –ø—Ä–∏–Ω–µ—Å—Ç–∏ –º–Ω–µ —á—É–≤—Å—Ç–≤–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è",
            "type": "depression",
            "options": [
                {"text": "—Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –æ–±—ã—á–Ω–æ", "score": 0},
                {"text": "–¥–∞, –Ω–æ –Ω–µ –≤ —Ç–æ–π —Å—Ç–µ–ø–µ–Ω–∏, –∫–∞–∫ —Ä–∞–Ω—å—à–µ", "score": 1},
                {"text": "–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ, —á–µ–º –æ–±—ã—á–Ω–æ", "score": 2},
                {"text": "—Å–æ–≤—Å–µ–º —Ç–∞–∫ –Ω–µ —Å—á–∏—Ç–∞—é", "score": 3}
            ]
        },
        {
            "id": 13,
            "text": "–£ –º–µ–Ω—è –±—ã–≤–∞–µ—Ç –≤–Ω–µ–∑–∞–ø–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –ø–∞–Ω–∏–∫–∏",
            "type": "anxiety",
            "options": [
                {"text": "–æ—á–µ–Ω—å —á–∞—Å—Ç–æ", "score": 3},
                {"text": "–¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ", "score": 2},
                {"text": "–Ω–µ —Ç–∞–∫ —É–∂ —á–∞—Å—Ç–æ", "score": 1},
                {"text": "—Å–æ–≤—Å–µ–º –Ω–µ –±—ã–≤–∞–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 14,
            "text": "–Ø –º–æ–≥—É –ø–æ–ª—É—á–∏—Ç—å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç —Ö–æ—Ä–æ—à–µ–π –∫–Ω–∏–≥–∏, —Ä–∞–¥–∏–æ- –∏–ª–∏ —Ç–µ–ª–µ–ø—Ä–æ–≥—Ä–∞–º–º—ã",
            "type": "depression",
            "options": [
                {"text": "—á–∞—Å—Ç–æ", "score": 0},
                {"text": "–∏–Ω–æ–≥–¥–∞", "score": 1},
                {"text": "—Ä–µ–¥–∫–æ", "score": 2},
                {"text": "–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ", "score": 3}
            ]
        }
    ]

def get_burns_questions() -> List[Dict]:
    """–¢–µ—Å—Ç –ë–µ—Ä–Ω—Å–∞ - –®–∫–∞–ª–∞ –¥–µ–ø—Ä–µ—Å—Å–∏–∏"""
    questions_text = [
        "–ß—É–≤—Å—Ç–≤–æ –≥—Ä—É—Å—Ç–∏ –∏–ª–∏ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç–∏",
        "–ß—É–≤—Å—Ç–≤–æ –Ω–µ—Å—á–∞—Å—Ç—å—è –∏–ª–∏ —Ö–∞–Ω–¥—Ä—ã", 
        "–ü—Ä–∏—Å—Ç—É–ø—ã –ø–ª–∞—á–∞ –∏–ª–∏ —Å–ª–µ–∑–ª–∏–≤–æ—Å—Ç—å",
        "–ß—É–≤—Å—Ç–≤–æ –æ–±–µ—Å–∫—É—Ä–∞–∂–µ–Ω–Ω–æ—Å—Ç–∏",
        "–ß—É–≤—Å—Ç–≤–æ –±–µ–∑–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏",
        "–ù–∏–∑–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞",
        "–ß—É–≤—Å—Ç–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–∏–∫—á–µ–º–Ω–æ—Å—Ç–∏ –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏",
        "–í–∏–Ω–∞ –∏–ª–∏ —Å—Ç—ã–¥",
        "–°–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∞ –∏–ª–∏ –æ–±–≤–∏–Ω–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö",
        "–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –ø—Ä–∏–Ω—è—Ç–∏–µ–º —Ä–µ—à–µ–Ω–∏–π",
        "–ü–æ—Ç–µ—Ä—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —Å–µ–º—å–µ, –¥—Ä—É–∑—å—è–º –∏–ª–∏ –∫–æ–ª–ª–µ–≥–∞–º",
        "–û–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ",
        "–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ —Å —Å–µ–º—å–µ–π –∏–ª–∏ –¥—Ä—É–∑—å—è–º–∏",
        "–ü–æ—Ç–µ—Ä—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏",
        "–ü–æ—Ç–µ—Ä—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —Ä–∞–±–æ—Ç–µ –∏–ª–∏ –¥—Ä—É–≥–∏–º –∑–∞–Ω—è—Ç–∏—è–º",
        "–ò–∑–±–µ–≥–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∑–∞–Ω—è—Ç–∏–π",
        "–ü–æ—Ç–µ—Ä—è —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –∏–ª–∏ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è –æ—Ç –∂–∏–∑–Ω–∏",
        "–ß—É–≤—Å—Ç–≤–æ —É—Å—Ç–∞–ª–æ—Å—Ç–∏",
        "–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å–æ —Å–Ω–æ–º –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–Ω–∞",
        "–°–Ω–∏–∂–µ–Ω–∏–µ –∏–ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∞–ø–ø–µ—Ç–∏—Ç–∞",
        "–ü–æ—Ç–µ—Ä—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —Å–µ–∫—Å—É",
        "–ë–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –æ —Å–≤–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ",
        "–ï—Å—Ç—å –ª–∏ —É –≤–∞—Å —Å—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –º—ã—Å–ª–∏?",
        "–•–æ—Ç–µ–ª–∏ –±—ã –≤—ã –ø–æ–∫–æ–Ω—á–∏—Ç—å —Å –∂–∏–∑–Ω—å—é?",
        "–ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –ø–ª–∞–Ω –ø—Ä–∏—á–∏–Ω–µ–Ω–∏—è —Å–µ–±–µ –≤—Ä–µ–¥–∞?"
    ]
    
    options = [
        {"text": "–°–æ–≤—Å–µ–º –Ω–µ—Ç", "score": 0},
        {"text": "–ù–µ–º–Ω–æ–≥–æ", "score": 1},
        {"text": "–£–º–µ—Ä–µ–Ω–Ω–æ", "score": 2},
        {"text": "–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ", "score": 3},
        {"text": "–ö—Ä–∞–π–Ω–µ —Å–∏–ª—å–Ω–æ", "score": 4}
    ]
    
    return [
        {
            "id": i,
            "text": f"{i}. {text}",
            "options": options
        }
        for i, text in enumerate(questions_text, 1)
    ]

def get_isi_questions() -> List[Dict]:
    """ISI - –ò–Ω–¥–µ–∫—Å —Ç—è–∂–µ—Å—Ç–∏ –±–µ—Å—Å–æ–Ω–Ω–∏—Ü—ã"""
    return [
        {
            "id": 1,
            "text": "–¢—Ä—É–¥–Ω–æ –∑–∞—Å–Ω—É—Ç—å",
            "options": [
                {"text": "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç", "score": 0},
                {"text": "–õ–µ–≥–∫–∞—è", "score": 1},
                {"text": "–£–º–µ—Ä–µ–Ω–Ω–∞—è", "score": 2},
                {"text": "–¢—è–∂–µ–ª–∞—è", "score": 3},
                {"text": "–û—á–µ–Ω—å —Ç—è–∂–µ–ª–∞—è", "score": 4}
            ]
        },
        {
            "id": 2,
            "text": "–ß–∞—Å—Ç–æ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å",
            "options": [
                {"text": "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç", "score": 0},
                {"text": "–õ–µ–≥–∫–∞—è", "score": 1},
                {"text": "–£–º–µ—Ä–µ–Ω–Ω–∞—è", "score": 2},
                {"text": "–¢—è–∂–µ–ª–∞—è", "score": 3},
                {"text": "–û—á–µ–Ω—å —Ç—è–∂–µ–ª–∞—è", "score": 4}
            ]
        },
        {
            "id": 3,
            "text": "–†–∞–Ω–æ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç–µ—Å—å –∏ –±–æ–ª—å—à–µ –Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç–µ",
            "options": [
                {"text": "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç", "score": 0},
                {"text": "–õ–µ–≥–∫–∞—è", "score": 1},
                {"text": "–£–º–µ—Ä–µ–Ω–Ω–∞—è", "score": 2},
                {"text": "–¢—è–∂–µ–ª–∞—è", "score": 3},
                {"text": "–û—á–µ–Ω—å —Ç—è–∂–µ–ª–∞—è", "score": 4}
            ]
        },
        {
            "id": 4,
            "text": "–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã/–Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω—ã –≤–∞—à–∏–º —Å–Ω–æ–º –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è?",
            "options": [
                {"text": "–û—á–µ–Ω—å —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω", "score": 0},
                {"text": "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω", "score": 1},
                {"text": "–£–º–µ—Ä–µ–Ω–Ω–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω", "score": 2},
                {"text": "–ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω", "score": 3},
                {"text": "–û—á–µ–Ω—å –Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω", "score": 4}
            ]
        },
        {
            "id": 5,
            "text": "–ù–∞—Å–∫–æ–ª—å–∫–æ –∑–∞–º–µ—Ç–Ω—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤–∞—à–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º –≤ –ø–ª–∞–Ω–µ —É—Ö—É–¥—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∂–∏–∑–Ω–∏?",
            "options": [
                {"text": "–°–æ–≤—Å–µ–º –Ω–µ –∑–∞–º–µ—Ç–Ω—ã", "score": 0},
                {"text": "–ù–µ–º–Ω–æ–≥–æ –∑–∞–º–µ—Ç–Ω—ã", "score": 1},
                {"text": "–î–æ–≤–æ–ª—å–Ω–æ –∑–∞–º–µ—Ç–Ω—ã", "score": 2},
                {"text": "–û—á–µ–Ω—å –∑–∞–º–µ—Ç–Ω—ã", "score": 3},
                {"text": "–ö—Ä–∞–π–Ω–µ –∑–∞–º–µ—Ç–Ω—ã", "score": 4}
            ]
        },
        {
            "id": 6,
            "text": "–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω—ã/–≤—Å—Ç—Ä–µ–≤–æ–∂–µ–Ω—ã –≤–∞—à–∏–º–∏ —Ç–µ–∫—É—â–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —Å–æ —Å–Ω–æ–º?",
            "options": [
                {"text": "–°–æ–≤—Å–µ–º –Ω–µ –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω", "score": 0},
                {"text": "–ù–µ–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω", "score": 1},
                {"text": "–î–æ–≤–æ–ª—å–Ω–æ –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω", "score": 2},
                {"text": "–û—á–µ–Ω—å –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω", "score": 3},
                {"text": "–ö—Ä–∞–π–Ω–µ –æ–±–µ—Å–ø–æ–∫–æ–µ–Ω", "score": 4}
            ]
        },
        {
            "id": 7,
            "text": "–ù–∞—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º –º–µ—à–∞—é—Ç –≤–∞—à–µ–º—É –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç–∞–ª–æ—Å—Ç—å –¥–Ω–µ–º, —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç–µ/–≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è, –ø–∞–º—è—Ç—å, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ç.–¥.)?",
            "options": [
                {"text": "–°–æ–≤—Å–µ–º –Ω–µ –º–µ—à–∞—é—Ç", "score": 0},
                {"text": "–ù–µ–º–Ω–æ–≥–æ –º–µ—à–∞—é—Ç", "score": 1},
                {"text": "–î–æ–≤–æ–ª—å–Ω–æ –º–µ—à–∞—é—Ç", "score": 2},
                {"text": "–û—á–µ–Ω—å –º–µ—à–∞—é—Ç", "score": 3},
                {"text": "–ö—Ä–∞–π–Ω–µ –º–µ—à–∞—é—Ç", "score": 4}
            ]
        }
    ]

def get_stop_bang_questions() -> List[Dict]:
    """STOP-BANG - –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞ –∞–ø–Ω–æ—ç —Å–Ω–∞"""
    return [
        {
            "id": 1,
            "text": "–í—ã –≥—Ä–æ–º–∫–æ —Ö—Ä–∞–ø–∏—Ç–µ? (–¢–æ –µ—Å—Ç—å —Ö—Ä–∞–ø –≥—Ä–æ–º—á–µ –≥–æ–≤–æ—Ä—è—â–µ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏–ª–∏ —Å–ª—ã—à–µ–Ω —á–µ—Ä–µ–∑ –∑–∞–∫—Ä—ã—Ç—É—é –¥–≤–µ—Ä—å —Å–ø–∞–ª—å–Ω–∏)",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 2,
            "text": "–í—ã —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏–ª–∏ —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å –≤ –¥–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è? (–ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞ —Ä—É–ª–µ–º –∏–ª–∏ –ø—Ä–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ)",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 3,
            "text": "–ö—Ç–æ-–Ω–∏–±—É–¥—å –≥–æ–≤–æ—Ä–∏–ª –í–∞–º, —á—Ç–æ –í—ã –Ω–µ –¥—ã—à–∏—Ç–µ –≤–æ —Å–Ω–µ –∏–ª–∏ –±—ã–ª–∏ –ª–∏ —É –í–∞—Å –ø—Ä–∏—Å—Ç—É–ø—ã —É–¥—É—à—å—è/–æ–¥—ã—à–∫–∏ –≤ –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 4,
            "text": "–°—Ç—Ä–∞–¥–∞–µ—Ç–µ –ª–∏ –í—ã –≥–∏–ø–µ—Ä—Ç–æ–Ω–∏—á–µ—Å–∫–æ–π –±–æ–ª–µ–∑–Ω—å—é?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 5,
            "text": "–í–∞—à –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ –±–æ–ª—å—à–µ 35?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 6,
            "text": "–í–∞–º –±–æ–ª—å—à–µ 50 –ª–µ—Ç?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 7,
            "text": "–û–∫—Ä—É–∂–Ω–æ—Å—Ç—å –í–∞—à–µ–π —à–µ–∏ –±–æ–ª—å—à–µ –Ω–æ—Ä–º—ã? (–î–ª—è –º—É–∂—á–∏–Ω –Ω–æ—Ä–º–∞ –¥–æ 43—Å–º, –¥–ª—è –∂–µ–Ω—â–∏–Ω –¥–æ 41—Å–º. –ò–∑–º–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —â–∏—Ç–æ–≤–∏–¥–Ω–æ–≥–æ —Ö—Ä—è—â–∞ –≥–æ—Ä—Ç–∞–Ω–∏)",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 8,
            "text": "–í—ã –º—É–∂—á–∏–Ω–∞?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        }
    ]

def get_ess_questions() -> List[Dict]:
    """ESS - –®–∫–∞–ª–∞ —Å–æ–Ω–ª–∏–≤–æ—Å—Ç–∏ –≠–ø–≤–æ—Ä—Ç–∞"""
    situations = [
        "–ö–æ–≥–¥–∞ —Å–∏–∂—É –∏ —á–∏—Ç–∞—é",
        "–ö–æ–≥–¥–∞ —Å–º–æ—Ç—Ä—é —Ç–µ–ª–µ–≤–∏–∑–æ—Ä",
        "–ö–æ–≥–¥–∞ –ø–∞—Å—Å–∏–≤–Ω–æ —Å–∏–∂—É –≤ –∫—Ä–µ—Å–ª–µ –Ω–∞ –ø—É–±–ª–∏—á–Ω–æ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ç–µ–∞—Ç—Ä–µ, –Ω–∞ —Å–æ–±—Ä–∞–Ω–∏–∏)",
        "–ö–æ–≥–¥–∞ –µ–¥—É –≤ –º–∞—à–∏–Ω–µ –∫–∞–∫ –ø–∞—Å—Å–∞–∂–∏—Ä –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫",
        "–ö–æ–≥–¥–∞ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–∑–≤–æ–ª–∏–ª–∏ –ø—Ä–∏–ª–µ—á—å –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –≤ –¥–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è",
        "–ö–æ–≥–¥–∞ —Å–∏–∂—É –∏ —Å –∫–µ–º-—Ç–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é",
        "–ö–æ–≥–¥–∞ —Å–ø–æ–∫–æ–π–Ω–æ —Å–∏–∂—É –ø–æ—Å–ª–µ –æ–±–µ–¥–∞ (–±–µ–∑ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∞–ª–∫–æ–≥–æ–ª—è)",
        "–ó–∞ —Ä—É–ª–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤ –ø—Ä–æ–±–∫–µ"
    ]
    
    options = [
        {"text": "—Ç–æ—á–Ω–æ –Ω–µ –∑–∞—Å–Ω—É", "score": 0},
        {"text": "–æ—á–µ–Ω—å –Ω–µ–±–æ–ª—å—à–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞—Å–Ω—É—Ç—å", "score": 1},
        {"text": "–≤–µ—Ä–æ—è—Ç–Ω–æ, –º–æ–≥—É –∑–∞—Å–Ω—É—Ç—å", "score": 2},
        {"text": "–æ—á–µ–Ω—å –±–æ–ª—å—à–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –∑–∞—Å–Ω—É", "score": 3}
    ]
    
    return [
        {
            "id": i,
            "text": f"–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞—Å–Ω—É—Ç—å –≤ —Å–∏—Ç—É–∞—Ü–∏–∏: {situation}",
            "options": options
        }
        for i, situation in enumerate(situations, 1)
    ]

def get_fagerstrom_questions() -> List[Dict]:
    """–¢–µ—Å—Ç –§–∞–≥–µ—Ä—Å—Ç—Ä–µ–º–∞ - –ù–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"""
    return [
        {
            "id": 1,
            "text": "–ö–∞–∫ –±—ã—Å—Ç—Ä–æ –≤—ã –∑–∞–∫—É—Ä–∏–≤–∞–µ—Ç–µ –ø–µ—Ä–≤—É—é —Å–∏–≥–∞—Ä–µ—Ç—É –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è?",
            "options": [
                {"text": "–í –ø–µ—Ä–≤—ã–µ 5 –º–∏–Ω—É—Ç", "score": 3},
                {"text": "–ß–µ—Ä–µ–∑ 6-30 –º–∏–Ω—É—Ç", "score": 2},
                {"text": "–ß–µ—Ä–µ–∑ 31-60 –º–∏–Ω—É—Ç", "score": 1},
                {"text": "–ß–µ—Ä–µ–∑ —á–∞—Å –∏–ª–∏ –ø–æ–∑–∂–µ", "score": 0}
            ]
        },
        {
            "id": 2,
            "text": "–¢—Ä—É–¥–Ω–æ –ª–∏ –≤–∞–º –≤–æ–∑–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –æ—Ç –∫—É—Ä–µ–Ω–∏—è –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –∫—É—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 3,
            "text": "–û—Ç –∫–∞–∫–æ–π —Å–∏–≥–∞—Ä–µ—Ç—ã –≤–∞–º —Ç—è–∂–µ–ª–µ–µ –≤—Å–µ–≥–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è?",
            "options": [
                {"text": "–û—Ç –ø–µ—Ä–≤–æ–π —Å —É—Ç—Ä–∞", "score": 1},
                {"text": "–û—Ç –ª—é–±–æ–π –¥—Ä—É–≥–æ–π", "score": 0}
            ]
        },
        {
            "id": 4,
            "text": "–°–∫–æ–ª—å–∫–æ —Å–∏–≥–∞—Ä–µ—Ç –≤ –¥–µ–Ω—å –≤—ã –≤—ã–∫—É—Ä–∏–≤–∞–µ—Ç–µ?",
            "options": [
                {"text": "10 –∏–ª–∏ –º–µ–Ω—å—à–µ", "score": 0},
                {"text": "11-20", "score": 1},
                {"text": "21-30", "score": 2},
                {"text": "31 –∏–ª–∏ –±–æ–ª—å—à–µ", "score": 3}
            ]
        },
        {
            "id": 5,
            "text": "–ö—É—Ä–∏—Ç–µ –ª–∏ –≤—ã –≤ –ø–µ—Ä–≤—ã–µ —á–∞—Å—ã –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è —á–∞—â–µ, —á–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –¥–Ω—è?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        },
        {
            "id": 6,
            "text": "–ö—É—Ä–∏—Ç–µ –ª–∏ –≤—ã, –∫–æ–≥–¥–∞ —Å–∏–ª—å–Ω–æ –∑–∞–±–æ–ª–µ–ª–∏ –∏ –≤—ã–Ω—É–∂–¥–µ–Ω—ã –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –¥–Ω—è –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤ –ø–æ—Å—Ç–µ–ª–∏?",
            "options": [
                {"text": "–î–∞", "score": 1},
                {"text": "–ù–µ—Ç", "score": 0}
            ]
        }
    ]

def get_audit_questions() -> List[Dict]:
    """AUDIT - –¢–µ—Å—Ç –Ω–∞ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è"""
    return [
        {
            "id": 1,
            "text": "–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã —É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç–µ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–†–∞–∑ –≤ –º–µ—Å—è—Ü –∏–ª–∏ —Ä–µ–∂–µ", "score": 1},
                {"text": "2-4 —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü", "score": 2},
                {"text": "2-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é", "score": 3},
                {"text": "4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é –∏ —á–∞—â–µ", "score": 4}
            ]
        },
        {
            "id": 2,
            "text": "–°–∫–æ–ª—å–∫–æ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–æ—Ä—Ü–∏–π) –≤—ã —É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç–µ –≤ —Ç–∏–ø–∏—á–Ω—ã–π –¥–µ–Ω—å, –∫–æ–≥–¥–∞ –≤—ã–ø–∏–≤–∞–µ—Ç–µ?",
            "info_text": "–û–¥–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø–æ—Ä—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç 10 –≥—Ä–∞–º–º–æ–≤ —ç—Ç–∏–ª–æ–≤–æ–≥–æ —Å–ø–∏—Ä—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∞–ª–µ–Ω—å–∫–∏–π –±–æ–∫–∞–ª –≤–∏–Ω–∞ –∏–ª–∏ —à–∞–º–ø–∞–Ω—Å–∫–æ–≥–æ (100 –º–ª, –∫—Ä–µ–ø–æ—Å—Ç—å 12-13%), –ü–æ–ª–æ–≤–∏–Ω–∞ –∫—Ä—É–∂–∫–∏ –ø–∏–≤–∞ (250 –º–ª, –∫—Ä–µ–ø–æ—Å—Ç—å 4,5-5%), –ë–æ–∫–∞–ª –∫—Ä–µ–ø–ª–µ–Ω–æ–≥–æ –≤–∏–Ω–∞ (60 –º–ª, –∫—Ä–µ–ø–æ—Å—Ç—å 16-22%), –ú–∞–ª–µ–Ω—å–∫–∞—è —Ä—é–º–∫–∞ –∫—Ä–µ–ø–∫–æ–≥–æ –∞–ª–∫–æ–≥–æ–ª—è (30 –º–ª, –∫—Ä–µ–ø–æ—Å—Ç—å 40%)",
            "options": [
                {"text": "1-2 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ä—Ü–∏–∏", "score": 0},
                {"text": "3-4", "score": 1},
                {"text": "5-6", "score": 2},
                {"text": "7-9", "score": 3},
                {"text": "10 –∏–ª–∏ –±–æ–ª—å—à–µ", "score": 4}
            ]
        },
        {
            "id": 3,
            "text": "–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã —É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç–µ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 1.5 –ª –ø–∏–≤–∞, –∏–ª–∏ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 180 –º–ª –∫—Ä–µ–ø–∫–æ–≥–æ –∞–ª–∫–æ–≥–æ–ª—è, –∏–ª–∏ –∫–∞–∫ –º–∏–Ω–∏–º—É–º –±—É—Ç—ã–ª–∫—É –≤–∏–Ω–∞ –∏–ª–∏ —à–∞–º–ø–∞–Ω—Å–∫–æ–≥–æ (750 –º–ª) –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–†–µ–∂–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü", "score": 1},
                {"text": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ", "score": 2},
                {"text": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "score": 3},
                {"text": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –ø–æ—á—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "score": 4}
            ]
        },
        {
            "id": 4,
            "text": "–ö–∞–∫ —á–∞—Å—Ç–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤ –≤—ã –Ω–µ –º–æ–≥–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –Ω–∞—á–∞–≤ —É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–†–µ–∂–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü", "score": 1},
                {"text": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ", "score": 2},
                {"text": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "score": 3},
                {"text": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –ø–æ—á—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "score": 4}
            ]
        },
        {
            "id": 5,
            "text": "–ö–∞–∫ —á–∞—Å—Ç–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤ –∏–∑-–∑–∞ –≤—ã–ø–∏–≤–∫–∏ –≤—ã –Ω–µ —Å–¥–µ–ª–∞–ª–∏ —Ç–æ, —á—Ç–æ –æ—Ç –≤–∞—Å –æ–±—ã—á–Ω–æ –æ–∂–∏–¥–∞–ª–æ—Å—å?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–†–µ–∂–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü", "score": 1},
                {"text": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ", "score": 2},
                {"text": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "score": 3},
                {"text": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –ø–æ—á—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "score": 4}
            ]
        },
        {
            "id": 6,
            "text": "–ö–∞–∫ —á–∞—Å—Ç–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –≤—ã–ø–∏—Ç—å —É—Ç—Ä–æ–º, —á—Ç–æ–±—ã –ø—Ä–∏–π—Ç–∏ –≤ —Å–µ–±—è –ø–æ—Å–ª–µ –≤—ã–ø–∏–≤–∫–∏ (–æ–ø–æ—Ö–º–µ–ª–∏—Ç—å—Å—è)?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–†–µ–∂–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü", "score": 1},
                {"text": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ", "score": 2},
                {"text": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "score": 3},
                {"text": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –ø–æ—á—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "score": 4}
            ]
        },
        {
            "id": 7,
            "text": "–ö–∞–∫ —á–∞—Å—Ç–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–ª–∏ —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã –∏–ª–∏ —Å–æ–∂–∞–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –≤—ã–ø–∏–≤–∫–∏?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–†–µ–∂–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü", "score": 1},
                {"text": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ", "score": 2},
                {"text": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "score": 3},
                {"text": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –ø–æ—á—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "score": 4}
            ]
        },
        {
            "id": 8,
            "text": "–ö–∞–∫ —á–∞—Å—Ç–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤ –≤—ã –Ω–µ –º–æ–≥–ª–∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞–∫–∞–Ω—É–Ω–µ –≤–µ—á–µ—Ä–æ–º –∏–∑-–∑–∞ –≤—ã–ø–∏–≤–∫–∏?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–†–µ–∂–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü", "score": 1},
                {"text": "–ï–∂–µ–º–µ—Å—è—á–Ω–æ", "score": 2},
                {"text": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ", "score": 3},
                {"text": "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –ø–æ—á—Ç–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ", "score": 4}
            ]
        },
        {
            "id": 9,
            "text": "–Ø–≤–ª—è–ª–æ—Å—å –ª–∏ –≤–∞—à–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤ –ø—Ä–∏—á–∏–Ω–æ–π —Ç—Ä–∞–≤–º—ã —É –≤–∞—Å –∏–ª–∏ —É –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–î–∞, –±–æ–ª–µ–µ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥", "score": 2},
                {"text": "–î–∞, –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 12 –º–µ—Å—è—Ü–µ–≤", "score": 4}
            ]
        },
                {
            "id": 10,
            "text": "–°–ª—É—á–∞–ª–æ—Å—å –ª–∏, —á—Ç–æ –≤–∞—à –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫ –∏–ª–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫, –¥—Ä—É–≥ –∏–ª–∏ –≤—Ä–∞—á –±–µ—Å–ø–æ–∫–æ–∏–ª—Å—è –Ω–∞—Å—á–µ—Ç —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≤–∞–º–∏ –∞–ª–∫–æ–≥–æ–ª—è –∏–ª–∏ —Å–æ–≤–µ—Ç–æ–≤–∞–ª –≤—ã–ø–∏–≤–∞—Ç—å –º–µ–Ω—å—à–µ?",
            "options": [
                {"text": "–ù–∏–∫–æ–≥–¥–∞", "score": 0},
                {"text": "–î–∞, –±–æ–ª–µ–µ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥", "score": 2},
                {"text": "–î–∞, –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 12 –º–µ—Å—è—Ü–µ–≤", "score": 4}
            ]
        }
    ]

# ============================================================================
# –§–£–ù–ö–¶–ò–ò –†–ê–°–ß–ï–¢–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
# ============================================================================

def calculate_hads_scores(answers: List[int]) -> Tuple[int, int]:
    """–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –±–∞–ª–ª—ã —Ç—Ä–µ–≤–æ–≥–∏ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ –¥–ª—è HADS"""
    questions = get_hads_questions()
    anxiety_score = 0
    depression_score = 0
    
    for i, answer in enumerate(answers):
        if i < len(questions):
            if questions[i]["type"] == "anxiety":
                anxiety_score += answer
            else:
                depression_score += answer
    
    return anxiety_score, depression_score

def validate_test_scores(**scores) -> Dict[str, Any]:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤"""
    validation_rules = {
        'hads_anxiety_score': (0, 21),
        'hads_depression_score': (0, 21),
        'burns_score': (0, 100),
        'isi_score': (0, 28),
        'stop_bang_score': (0, 8),
        'ess_score': (0, 24),
        'fagerstrom_score': (0, 10),
        'audit_score': (0, 40)
    }
    
    errors = []
    for test_name, score in scores.items():
        if test_name in validation_rules and score is not None:
            min_val, max_val = validation_rules[test_name]
            if not (min_val <= score <= max_val):
                errors.append(f"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è {test_name}: {score} (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å {min_val}-{max_val})")
    
    return {'valid': len(errors) == 0, 'errors': errors}

# ============================================================================
# –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–ò –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
# ============================================================================

def get_hads_interpretation(anxiety_score: int, depression_score: int) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ HADS"""
    def get_level(score: int) -> str:
        if score <= 7:
            return "–Ω–æ—Ä–º–∞"
        elif score <= 10:
            return "—Å—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã"
        else:
            return "–∫–ª–∏–Ω–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã"
    
    anxiety_level = get_level(anxiety_score)
    depression_level = get_level(depression_score)
    
    result = f"<b>–¢—Ä–µ–≤–æ–≥–∞:</b> {anxiety_score} –±–∞–ª–ª–æ–≤ - {anxiety_level}\n"
    result += f"<b>–î–µ–ø—Ä–µ—Å—Å–∏—è:</b> {depression_score} –±–∞–ª–ª–æ–≤ - {depression_level}\n\n"
    
    if anxiety_score > 10 or depression_score > 10:
        result += "üö® <b>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</b> –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (–ø—Å–∏—Ö–æ–ª–æ–≥–∞, –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∞) –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ—Ü–µ–Ω–∫–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ–π –ø–æ–º–æ—â–∏."
    elif anxiety_score > 7 or depression_score > 7:
        result += "‚ö†Ô∏è <b>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</b> –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–≤–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º, —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏."
    else:
        result += "‚úÖ <b>–†–µ–∑—É–ª—å—Ç–∞—Ç:</b> –í–∞—à–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ç—Ä–µ–≤–æ–≥–∏ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã."
    
    if anxiety_score > 7 or depression_score > 7:
        result += "\n\nüí° <b>–°–≤—è–∑—å —Å —Å–µ—Ä–¥—Ü–µ–º:</b> –¢—Ä–µ–≤–æ–≥–∞ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏—è –ø–æ–≤—ã—à–∞—é—Ç —Ä–∏—Å–∫ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –≤ 1,5-2 —Ä–∞–∑–∞. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ—Å—Å–æ–º - –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏."
    
    return result

def get_burns_interpretation(score: int) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ –ë–µ—Ä–Ω—Å–∞"""
    if score <= 5:
        level = "–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"
        color = "üü¢"
        recommendation = "‚úÖ –í–∞—à–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –Ω–æ—Ä–º–µ."
    elif score <= 10:
        level = "–ª–µ–≥–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"
        color = "üü°"
        recommendation = "üí° –õ–µ–≥–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Å–Ω–∏–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∂–∏–º –¥–Ω—è, —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞."
    elif score <= 25:
        level = "—É–º–µ—Ä–µ–Ω–Ω–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"
        color = "üü†"
        recommendation = "‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏."
    elif score <= 50:
        level = "—Ç—è–∂–µ–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"
        color = "üî¥"
        recommendation = "üö® –ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∞ –∏–ª–∏ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∞."
    else:
        level = "–∫—Ä–∞–π–Ω–µ —Ç—è–∂–µ–ª–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è"
        color = "üî¥"
        recommendation = "üö® –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ."
    
    cardio_impact = ""
    if score > 10:
        cardio_impact = f"\n\n{color} <b>–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–µ—Ä–¥—Ü–µ:</b> –î–µ–ø—Ä–µ—Å—Å–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∏—Å–∫ –ò–ë–° –≤ 1,5-2 —Ä–∞–∑–∞ –∏ –ø–æ–≤—ã—à–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ñ–∞—Ä–∫—Ç–∞. –õ–µ—á–µ–Ω–∏–µ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π."
    
    return f"<b>–£—Ä–æ–≤–µ–Ω—å –¥–µ–ø—Ä–µ—Å—Å–∏–∏:</b> {level}\n\n{recommendation}{cardio_impact}"

def get_isi_interpretation(score: int) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ ISI"""
    if score <= 7:
        level = "–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–æ–π –±–µ—Å—Å–æ–Ω–Ω–∏—Ü—ã"
        color = "üü¢"
        recommendation = "‚úÖ –£ –≤–∞—Å —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞."
    elif score <= 14:
        level = "–ø–æ–¥–ø–æ—Ä–æ–≥–æ–≤–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞"
        color = "üü°"
        recommendation = "üí° –õ–µ–≥–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –≥–∏–≥–∏–µ–Ω—É —Å–Ω–∞: —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Ä–µ–∂–∏–º, –∫–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Å–ø–∞–ª—å–Ω–µ."
    elif score <= 21:
        level = "–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ —É–º–µ—Ä–µ–Ω–Ω–æ–π —Ç—è–∂–µ—Å—Ç–∏"
        color = "üü†"
        recommendation = "‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤—Ä–∞—á–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∏—á–∏–Ω –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å–Ω–∞ –∏ –ø–æ–¥–±–æ—Ä–∞ –ª–µ—á–µ–Ω–∏—è."
    else:
        level = "—Ç—è–∂–µ–ª–∞—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞"
        color = "üî¥"
        recommendation = "üö® –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–æ–º–Ω–æ–ª–æ–≥–∞ –∏–ª–∏ –Ω–µ–≤—Ä–æ–ª–æ–≥–∞ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –ª–µ—á–µ–Ω–∏—è."
    
    sleep_tips = f"""\n\n{color} <b>–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–µ—Ä–¥—Ü–µ:</b> –•—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫:
‚Ä¢ –ê—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –≥–∏–ø–µ—Ä—Ç–µ–Ω–∑–∏–∏ –≤ 2-3 —Ä–∞–∑–∞
‚Ä¢ –ò–ë–° –≤ 1,5 —Ä–∞–∑–∞
‚Ä¢ –ò–Ω—Ñ–∞—Ä–∫—Ç–∞ –º–∏–æ–∫–∞—Ä–¥–∞ –≤ 1,6 —Ä–∞–∑–∞

üí° <b>–ì–∏–≥–∏–µ–Ω–∞ —Å–Ω–∞:</b>
‚Ä¢ –õ–æ–∂–∏—Ç–µ—Å—å —Å–ø–∞—Ç—å –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è
‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ —Å–ø–∞–ª—å–Ω–µ 18-20¬∞C
‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ –∫–æ—Ñ–µ–∏–Ω–∞ –ø–æ—Å–ª–µ 14:00
‚Ä¢ –ü—Ä–æ–≤–µ—Å—Ç–∏ —á–∞—Å –¥–æ —Å–Ω–∞ –±–µ–∑ –≥–∞–¥–∂–µ—Ç–æ–≤"""
    
    return f"<b>–ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞:</b> {level}\n\n{recommendation}{sleep_tips}"

def get_stop_bang_interpretation(score: int) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ STOP-BANG"""
    if score <= 2:
        risk = "–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫"
        color = "üü¢"
        recommendation = "‚úÖ –£ –≤–∞—Å –Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫ —Å–∏–Ω–¥—Ä–æ–º–∞ –æ–±—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–ø–Ω–æ—ç —Å–Ω–∞."
    elif score <= 4:
        risk = "—É–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫"
        color = "üü°"
        recommendation = "‚ö†Ô∏è –£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫ –∞–ø–Ω–æ—ç —Å–Ω–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è."
    else:
        risk = "–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫"
        color = "üî¥"
        recommendation = "üö® –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Å–∏–Ω–¥—Ä–æ–º–∞ –æ–±—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–ø–Ω–æ—ç —Å–Ω–∞. –ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–æ–º–Ω–æ–ª–æ–≥–∞ –∏ –ø–æ–ª–∏—Å–æ–º–Ω–æ–≥—Ä–∞—Ñ–∏—è."
    
    cardio_risks = f"""\n\n{color} <b>–†–∏—Å–∫–∏ –¥–ª—è —Å–µ—Ä–¥—Ü–∞ –ø—Ä–∏ –∞–ø–Ω–æ—ç —Å–Ω–∞:</b>
‚Ä¢ –ê—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è –≥–∏–ø–µ—Ä—Ç–µ–Ω–∑–∏—è - –≤ 2,9 —Ä–∞–∑–∞ —á–∞—â–µ
‚Ä¢ –ò–Ω—Ñ–∞—Ä–∫—Ç –º–∏–æ–∫–∞—Ä–¥–∞ - –≤ 5 —Ä–∞–∑ —á–∞—â–µ
‚Ä¢ –ò–Ω—Å—É–ª—å—Ç - –≤ 4 —Ä–∞–∑–∞ —á–∞—â–µ
‚Ä¢ –í–Ω–µ–∑–∞–ø–Ω–∞—è —Å–º–µ—Ä—Ç—å –≤–æ —Å–Ω–µ - –≤ 2,6 —Ä–∞–∑–∞ —á–∞—â–µ
‚Ä¢ –§–∏–±—Ä–∏–ª–ª—è—Ü–∏—è –ø—Ä–µ–¥—Å–µ—Ä–¥–∏–π - –≤ 4 —Ä–∞–∑–∞ —á–∞—â–µ"""
    
    return f"<b>–†–∏—Å–∫ –∞–ø–Ω–æ—ç —Å–Ω–∞:</b> {risk}\n\n{recommendation}{cardio_risks}"

def get_ess_interpretation(score: int) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ ESS"""
    if score <= 10:
        level = "–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å"
        color = "üü¢"
        recommendation = "‚úÖ –£—Ä–æ–≤–µ–Ω—å –¥–Ω–µ–≤–Ω–æ–π —Å–æ–Ω–ª–∏–≤–æ—Å—Ç–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã."
    elif score <= 12:
        level = "–ª–µ–≥–∫–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å"
        color = "üü°"
        recommendation = "üí° –õ–µ–≥–∫–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–æ—á–Ω–æ–≥–æ —Å–Ω–∞ –∏ —Ä–µ–∂–∏–º –¥–Ω—è."
    elif score <= 15:
        level = "—É–º–µ—Ä–µ–Ω–Ω–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å"
        color = "üü†"
        recommendation = "‚ö†Ô∏è –£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤—Ä–∞—á–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω."
    else:
        level = "–≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å"
        color = "üî¥"
        recommendation = "üö® –í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å. –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–æ–º–Ω–æ–ª–æ–≥–∞ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å–Ω–∞."
    
    safety_info = f"""\n\n{color} <b>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ä–∏—Å–∫–∏:</b>
‚Ä¢ –ü—Ä–∏ ESS >15: —Ä–∏—Å–∫ –∑–∞—Å—ã–ø–∞–Ω–∏—è –∑–∞ —Ä—É–ª–µ–º –≤ 7 —Ä–∞–∑ –≤—ã—à–µ
‚Ä¢ –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π —Ä–∏—Å–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–≤–º–∞—Ç–∏–∑–º–∞
‚Ä¢ –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

üöó <b>–í–∞–∂–Ω–æ:</b> –ü—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è—Ö ESS –∏–∑–±–µ–≥–∞–π—Ç–µ –≤–æ–∂–¥–µ–Ω–∏—è –±–µ–∑ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –≤—Ä–∞—á–∞!

üí° <b>–ü—Ä–∏—á–∏–Ω—ã —Å–æ–Ω–ª–∏–≤–æ—Å—Ç–∏:</b>
‚Ä¢ –°–∏–Ω–¥—Ä–æ–º –∞–ø–Ω–æ—ç —Å–Ω–∞
‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –Ω–æ—á–Ω–æ–≥–æ —Å–Ω–∞
‚Ä¢ –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ª–µ–∫–∞—Ä—Å—Ç–≤"""
    
    return f"<b>–î–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å:</b> {level}\n\n{recommendation}{safety_info}"

def get_fagerstrom_interpretation(score: int) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ –§–∞–≥–µ—Ä—Å—Ç—Ä–µ–º–∞"""
    if score <= 2:
        level = "–æ—á–µ–Ω—å —Å–ª–∞–±–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
        color = "üü°"
        recommendation = "üí° –£ –≤–∞—Å –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –û—Ç–ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –æ—Ç–∫–∞–∑–∞ –æ—Ç –∫—É—Ä–µ–Ω–∏—è!"
        success_rate = "85-90%"
    elif score <= 4:
        level = "—Å–ª–∞–±–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
        color = "üü†"
        recommendation = "‚ö†Ô∏è –°–ª–∞–±–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É –∑–∞ –ø–æ–º–æ—â—å—é –≤ –æ—Ç–∫–∞–∑–µ –æ—Ç –∫—É—Ä–µ–Ω–∏—è."
        success_rate = "70-80%"
    elif score <= 6:
        level = "—Å—Ä–µ–¥–Ω—è—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
        color = "üî¥"
        recommendation = "üö® –°—Ä–µ–¥–Ω—è—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å –∏ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–∑–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞."
        success_rate = "50-60%"
    elif score <= 7:
        level = "—Å–∏–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
        color = "üî¥"
        recommendation = "üö® –°–∏–ª—å–Ω–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Ç–∫–∞–∑–∞ –ø–æ–¥ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º –≤—Ä–∞—á–∞."
        success_rate = "30-40%"
    else:
        level = "–æ—á–µ–Ω—å —Å–∏–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
        color = "üî¥"
        recommendation = "üö® –û—á–µ–Ω—å —Å–∏–ª—å–Ω–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ —Å—Ä–æ—á–Ω–∞—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –ø–æ–º–æ—â—å –≤ –æ—Ç–∫–∞–∑–µ –æ—Ç –∫—É—Ä–µ–Ω–∏—è."
        success_rate = "15-25%"
    
    cardio_impact = f"""\n\n{color} <b>–í–ª–∏—è–Ω–∏–µ –∫—É—Ä–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–¥—Ü–µ:</b>
‚Ä¢ –†–∏—Å–∫ –ò–ë–° —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 2-4 —Ä–∞–∑–∞
‚Ä¢ –†–∏—Å–∫ –∏–Ω—Ñ–∞—Ä–∫—Ç–∞ –º–∏–æ–∫–∞—Ä–¥–∞ - –≤ 2-6 —Ä–∞–∑
‚Ä¢ –†–∏—Å–∫ –∏–Ω—Å—É–ª—å—Ç–∞ - –≤ 2-3 —Ä–∞–∑–∞
‚Ä¢ –£—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏–µ –∞—Ç–µ—Ä–æ—Å–∫–ª–µ—Ä–æ–∑–∞
‚Ä¢ –ü–æ–≤—ã—à–∞–µ—Ç –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ

üéØ <b>–®–∞–Ω—Å—ã –Ω–∞ —É—Å–ø–µ—Ö –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ:</b> {success_rate}"""
    
    return f"<b>–ù–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:</b> {level}\n\n{recommendation}{cardio_impact}"

def get_audit_interpretation(score: int) -> str:
    """–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ AUDIT"""
    if score <= 7:
        level = "–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫"
        color = "üü¢"
        recommendation = "‚úÖ –í–∞—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö."
    elif score <= 15:
        level = "–æ–ø–∞—Å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ"
        color = "üü°"
        recommendation = "‚ö†Ô∏è –û–ø–∞—Å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∏–∑–∏—Ç—å —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É –∑–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–µ–π."
    elif score <= 19:
        level = "–≤—Ä–µ–¥–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ"
        color = "üü†"
        recommendation = "üö® –í—Ä–µ–¥–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è. –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –Ω–∞—Ä–∫–æ–ª–æ–≥–∞ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–Ω–∏–∂–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è."
    else:
        level = "–≤–æ–∑–º–æ–∂–Ω–∞—è –∞–ª–∫–æ–≥–æ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
        color = "üî¥"
        recommendation = "üö® –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∞–ª–∫–æ–≥–æ–ª—å–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –Ω–∞—Ä–∫–æ–ª–æ–≥–∞."
    
    cardio_info = f"""\n\n{color} <b>–í–ª–∏—è–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è –Ω–∞ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É:</b>

<b>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–æ–∑—ã:</b>
‚Ä¢ –ú—É–∂—á–∏–Ω—ã: –Ω–µ –±–æ–ª–µ–µ 14 –µ–¥–∏–Ω–∏—Ü –≤ –Ω–µ–¥–µ–ª—é
‚Ä¢ –ñ–µ–Ω—â–∏–Ω—ã: –Ω–µ –±–æ–ª–µ–µ 7 –µ–¥–∏–Ω–∏—Ü –≤ –Ω–µ–¥–µ–ª—é
‚Ä¢ 1 –µ–¥–∏–Ω–∏—Ü–∞ = 10–≥ —á–∏—Å—Ç–æ–≥–æ –∞–ª–∫–æ–≥–æ–ª—è = 100–º–ª –≤–∏–Ω–∞ –∏–ª–∏ 250–º–ª –ø–∏–≤–∞

<b>–†–∏—Å–∫–∏ —á—Ä–µ–∑–º–µ—Ä–Ω–æ–≥–æ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è:</b>
‚Ä¢ –ê—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è –≥–∏–ø–µ—Ä—Ç–µ–Ω–∑–∏—è
‚Ä¢ –ö–∞—Ä–¥–∏–æ–º–∏–æ–ø–∞—Ç–∏—è
‚Ä¢ –ê—Ä–∏—Ç–º–∏–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ —Ñ–∏–±—Ä–∏–ª–ª—è—Ü–∏—è –ø—Ä–µ–¥—Å–µ—Ä–¥–∏–π)
‚Ä¢ –ò–Ω—Å—É–ª—å—Ç
‚Ä¢ –í–Ω–µ–∑–∞–ø–Ω–∞—è —Å–µ—Ä–¥–µ—á–Ω–∞—è —Å–º–µ—Ä—Ç—å
"""
    
    return f"<b>–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è:</b> {level}\n\n{recommendation}{cardio_info}"

# ============================================================================
# –ö–û–ú–ü–õ–ï–ö–°–ù–ê–Ø –û–¶–ï–ù–ö–ê –†–ò–°–ö–û–í
# ============================================================================

def calculate_overall_cardiovascular_risk(user_data: Dict, survey_data: Dict, test_data: Dict) -> Dict[str, Any]:
    """–†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–≥–æ —Ä–∏—Å–∫–∞"""
    risk_factors = []
    risk_score = 0
    
    # –î–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞
    age = survey_data.get('age', 0)
    if age > 45:
        risk_factors.append("–í–æ–∑—Ä–∞—Å—Ç —Å—Ç–∞—Ä—à–µ 45 –ª–µ—Ç")
        risk_score += 2
    elif age > 35:
        risk_factors.append("–í–æ–∑—Ä–∞—Å—Ç —Å—Ç–∞—Ä—à–µ 35 –ª–µ—Ç")
        risk_score += 1
    
    if survey_data.get('gender') == '–ú—É–∂—Å–∫–æ–π':
        risk_factors.append("–ú—É–∂—Å–∫–æ–π –ø–æ–ª")
        risk_score += 1
    
    # –ê–Ω–∞–º–Ω–µ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã
    if survey_data.get('heart_disease') == '–î–∞':
        risk_factors.append("–ó–∞–±–æ–ª–µ–≤–∞–Ω–∏—è —Å–µ—Ä–¥—Ü–∞ –≤ –∞–Ω–∞–º–Ω–µ–∑–µ")
        risk_score += 4
    
    # –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∏ —Ä–∏—Å–∫–∞
    health_rating = survey_data.get('health_rating', 10)
    if health_rating <= 5:
        risk_factors.append("–ù–∏–∑–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è")
        risk_score += 1
    
    cv_risk = survey_data.get('cv_risk', '')
    if cv_risk == '–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π':
        risk_factors.append("–í—ã—Å–æ–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–≥–æ —Ä–∏—Å–∫–∞")
        risk_score += 2
    elif cv_risk == '–≤—ã—Å–æ–∫–∏–π':
        risk_factors.append("–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–≥–æ —Ä–∏—Å–∫–∞")
        risk_score += 1
    
    # –ü—Å–∏—Ö–æ—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã
    hads_anxiety = test_data.get('hads_anxiety_score', 0)
    if hads_anxiety >= 11:
        risk_factors.append("–ö–ª–∏–Ω–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–∞—è —Ç—Ä–µ–≤–æ–≥–∞")
        risk_score += 2
    elif hads_anxiety >= 8:
        risk_factors.append("–°—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞")
        risk_score += 1
    
    hads_depression = test_data.get('hads_depression_score', 0)
    if hads_depression >= 11:
        risk_factors.append("–ö–ª–∏–Ω–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è")
        risk_score += 3
    elif hads_depression >= 8:
        risk_factors.append("–°—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è")
        risk_score += 1
    
    burns_score = test_data.get('burns_score', 0)
    if burns_score >= 25:
        risk_factors.append("–í—ã—Ä–∞–∂–µ–Ω–Ω–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ")
        risk_score += 2
    elif burns_score >= 11:
        risk_factors.append("–£–º–µ—Ä–µ–Ω–Ω–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ")
        risk_score += 1
    
    # –ù–∞—Ä—É—à–µ–Ω–∏—è —Å–Ω–∞
    isi_score = test_data.get('isi_score', 0)
    if isi_score >= 15:
        risk_factors.append("–ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞")
        risk_score += 2
    elif isi_score >= 8:
        risk_factors.append("–°—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞")
        risk_score += 1
    
    stop_bang_score = test_data.get('stop_bang_score', 0)
    if stop_bang_score >= 5:
        risk_factors.append("–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∞–ø–Ω–æ—ç —Å–Ω–∞")
        risk_score += 3
    elif stop_bang_score >= 3:
        risk_factors.append("–£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫ –∞–ø–Ω–æ—ç —Å–Ω–∞")
        risk_score += 1
    
    ess_score = test_data.get('ess_score', 0)
    if ess_score >= 16:
        risk_factors.append("–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å")
        risk_score += 1
    
    # –í—Ä–µ–¥–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏
    fagerstrom_score = test_data.get('fagerstrom_score', 0)
    if fagerstrom_score and fagerstrom_score >= 7:
        risk_factors.append("–°–∏–ª—å–Ω–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 4
    elif fagerstrom_score and fagerstrom_score >= 5:
        risk_factors.append("–£–º–µ—Ä–µ–Ω–Ω–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 3
    elif fagerstrom_score and fagerstrom_score >= 3:
        risk_factors.append("–°–ª–∞–±–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 2
    elif fagerstrom_score and fagerstrom_score > 0:
        risk_factors.append("–ö—É—Ä–µ–Ω–∏–µ")
        risk_score += 1
    
    audit_score = test_data.get('audit_score', 0)
    if audit_score and audit_score >= 20:
        risk_factors.append("–í–æ–∑–º–æ–∂–Ω–∞—è –∞–ª–∫–æ–≥–æ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 3
    elif audit_score and audit_score >= 16:
        risk_factors.append("–í—Ä–µ–¥–Ω–æ–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è")
        risk_score += 2
    elif audit_score and audit_score >= 8:
        risk_factors.append("–û–ø–∞—Å–Ω–æ–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è")
        risk_score += 1
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞
    if risk_score <= 3:
        risk_level = "–ù–ò–ó–ö–ò–ô"
        risk_color = "üü¢"
        recommendation = "–í–∞—à —Ä–∏—Å–∫ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –Ω–∏–∑–∫–∏–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤–µ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–º–æ—Ç—Ä—ã."
    elif risk_score <= 7:
        risk_level = "–£–ú–ï–†–ï–ù–ù–´–ô"
        risk_color = "üü°"
        recommendation = "–£ –≤–∞—Å —É–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞."
    elif risk_score <= 12:
        risk_level = "–í–´–°–û–ö–ò–ô"
        risk_color = "üü†"
        recommendation = "–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π. –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞ –∏ –∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞."
    else:
        risk_level = "–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô"
        risk_color = "üî¥"
        recommendation = "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫. –°—Ä–æ—á–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –ª–µ—á–µ–Ω–∏—è."
    
    return {
        'risk_level': risk_level,
        'risk_score': risk_score,
        'risk_factors': risk_factors,
        'risk_color': risk_color,
        'recommendation': recommendation,
        'factors_count': len(risk_factors)
    }

def generate_personalized_recommendations(risk_assessment: Dict, test_data: Dict) -> str:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π"""
    recommendations = []
    
    # –ë–∞–∑–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    recommendations.append("ü´Ä <b>–ë–ê–ó–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –ó–î–û–†–û–í–¨–Ø –°–ï–†–î–¶–ê:</b>")
    recommendations.append("‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –º–∏–Ω–∏–º—É–º 150 –º–∏–Ω—É—Ç –≤ –Ω–µ–¥–µ–ª—é")
    recommendations.append("‚Ä¢ –°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∞—è –¥–∏–µ—Ç–∞: –±–æ–ª—å—à–µ –æ–≤–æ—â–µ–π, —Ä—ã–±—ã, –æ–ª–∏–≤–∫–æ–≤–æ–≥–æ –º–∞—Å–ª–∞")
    recommendations.append("‚Ä¢ –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Å–∞: –ò–ú–¢ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 18,5-24,9 –∫–≥/–º¬≤")
    recommendations.append("‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–æ–ª–∏: –Ω–µ –±–æ–ª–µ–µ 5–≥ –≤ –¥–µ–Ω—å")
    recommendations.append("‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è")
    
    # –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    hads_anxiety = test_data.get('hads_anxiety_score', 0)
    hads_depression = test_data.get('hads_depression_score', 0)
    
    if hads_anxiety >= 8 or hads_depression >= 8:
        recommendations.append("\nüò∞ <b>–£–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ï–°–°–û–ú –ò –ù–ê–°–¢–†–û–ï–ù–ò–ï–ú:</b>")
        recommendations.append("‚Ä¢ –¢–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏: –º–µ–¥–∏—Ç–∞—Ü–∏—è, –≥–ª—É–±–æ–∫–æ–µ –¥—ã—Ö–∞–Ω–∏–µ")
        recommendations.append("‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Å—Ç—Ä–µ—Å—Å–∞")
        recommendations.append("‚Ä¢ –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Å–æ–Ω: 7-9 —á–∞—Å–æ–≤ –≤ —Å—É—Ç–∫–∏")
        recommendations.append("‚Ä¢ –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞: –æ–±—â–µ–Ω–∏–µ —Å –±–ª–∏–∑–∫–∏–º–∏")
        
        if hads_anxiety >= 11 or hads_depression >= 11:
            recommendations.append("‚Ä¢ üö® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∞")
    
    isi_score = test_data.get('isi_score', 0)
    if isi_score >= 8:
        recommendations.append("\nüò¥ <b>–£–õ–£–ß–®–ï–ù–ò–ï –ö–ê–ß–ï–°–¢–í–ê –°–ù–ê:</b>")
        recommendations.append("‚Ä¢ –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞: –ª–æ–∂–∏—Ç—å—Å—è –∏ –≤—Å—Ç–∞–≤–∞—Ç—å –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è")
        recommendations.append("‚Ä¢ –ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è —Å—Ä–µ–¥–∞: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 18-20¬∞C, —Ç–µ–º–Ω–æ—Ç–∞, —Ç–∏—à–∏–Ω–∞")
        recommendations.append("‚Ä¢ –ò–∑–±–µ–≥–∞–Ω–∏–µ –∫–æ—Ñ–µ–∏–Ω–∞ –ø–æ—Å–ª–µ 14:00")
        recommendations.append("‚Ä¢ –û—Ç–∫–∞–∑ –æ—Ç –≥–∞–¥–∂–µ—Ç–æ–≤ –∑–∞ 1 —á–∞—Å –¥–æ —Å–Ω–∞")
        recommendations.append("‚Ä¢ –†–µ–ª–∞–∫—Å–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–Ω–æ–º: —á—Ç–µ–Ω–∏–µ, –ª–µ–≥–∫–∞—è –º—É–∑—ã–∫–∞")
        
        if isi_score >= 15:
            recommendations.append("‚Ä¢ üö® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–æ–º–Ω–æ–ª–æ–≥–∞")
    
    stop_bang_score = test_data.get('stop_bang_score', 0)
    if stop_bang_score >= 3:
        recommendations.append("\nüò™ <b>–ü–†–û–§–ò–õ–ê–ö–¢–ò–ö–ê –ê–ü–ù–û–≠ –°–ù–ê:</b>")
        recommendations.append("‚Ä¢ –°–Ω–∏–∂–µ–Ω–∏–µ –≤–µ—Å–∞ –ø—Ä–∏ –æ–∂–∏—Ä–µ–Ω–∏–∏")
        recommendations.append("‚Ä¢ –°–æ–Ω –Ω–∞ –±–æ–∫—É (–Ω–µ –Ω–∞ —Å–ø–∏–Ω–µ)")
        recommendations.append("‚Ä¢ –û—Ç–∫–∞–∑ –æ—Ç –∞–ª–∫–æ–≥–æ–ª—è –∑–∞ 3 —á–∞—Å–∞ –¥–æ —Å–Ω–∞")
        recommendations.append("‚Ä¢ –ò–∑–±–µ–≥–∞–Ω–∏–µ —Å–µ–¥–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤")
        
        if stop_bang_score >= 5:
            recommendations.append("‚Ä¢ üö® –°–†–û–ß–ù–û: –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —É —Å–æ–º–Ω–æ–ª–æ–≥–∞ (–ø–æ–ª–∏—Å–æ–º–Ω–æ–≥—Ä–∞—Ñ–∏—è)")
    
    fagerstrom_score = test_data.get('fagerstrom_score')
    if fagerstrom_score and fagerstrom_score > 0:
        recommendations.append("\nüö≠ <b>–û–¢–ö–ê–ó –û–¢ –ö–£–†–ï–ù–ò–Ø:</b>")
        recommendations.append("‚Ä¢ –ù–∞–∑–Ω–∞—á—å—Ç–µ –¥–∞—Ç—É –æ—Ç–∫–∞–∑–∞ –æ—Ç –∫—É—Ä–µ–Ω–∏—è")
        recommendations.append("‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –∑–∞ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–∑–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π")
        recommendations.append("‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∏–∫–æ—Ç–∏–Ω–∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω—É—é —Ç–µ—Ä–∞–ø–∏—é")
        recommendations.append("‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤: –º–µ—Å—Ç–∞ –∏ —Å–∏—Ç—É–∞—Ü–∏–∏ –∫—É—Ä–µ–Ω–∏—è")
        
        if fagerstrom_score >= 5:
            recommendations.append("‚Ä¢ üö® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤ –Ω–∞—Ä–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –∫–ª–∏–Ω–∏–∫–µ")
    
    audit_score = test_data.get('audit_score', 0)
    if audit_score >= 8:
        recommendations.append("\nüç∑ <b>–ö–û–ù–¢–†–û–õ–¨ –£–ü–û–¢–†–ï–ë–õ–ï–ù–ò–Ø –ê–õ–ö–û–ì–û–õ–Ø:</b>")
        recommendations.append("‚Ä¢ –í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∞–ª–∫–æ–≥–æ–ª—è")
        recommendations.append("‚Ä¢ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–Ω–∏ –ø–æ–ª–Ω–æ–≥–æ –≤–æ–∑–¥–µ—Ä–∂–∞–Ω–∏—è")
        recommendations.append("‚Ä¢ –ù–µ –ø—Ä–µ–≤—ã—à–∞–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–æ–∑—ã")
        recommendations.append("‚Ä¢ –ó–∞–º–µ–Ω–∏—Ç–µ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏ –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–º–∏")
        
        if audit_score >= 16:
            recommendations.append("‚Ä¢ üö® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –Ω–∞—Ä–∫–æ–ª–æ–≥–∞")
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Ä–æ–≤–Ω—é —Ä–∏—Å–∫–∞
    risk_level = risk_assessment.get('risk_level', '–ù–ò–ó–ö–ò–ô')
    
    if risk_level in ['–í–´–°–û–ö–ò–ô', '–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô']:
            recommendations.append("\nüè• <b>–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–ï–†–´ –ü–†–ò –í–´–°–û–ö–û–ú –†–ò–°–ö–ï:</b>")
            recommendations.append("‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞")
            recommendations.append("‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ê–î –¥–æ–º–∞")
            recommendations.append("‚Ä¢ –ê–Ω–∞–ª–∏–∑—ã –∫—Ä–æ–≤–∏ –∫–∞–∂–¥—ã–µ 3-6 –º–µ—Å—è—Ü–µ–≤")
            recommendations.append("‚Ä¢ –≠–ö–ì –∫–∞–∂–¥—ã–µ 6 –º–µ—Å—è—Ü–µ–≤")
            recommendations.append("‚Ä¢ –≠—Ö–æ–ö–ì –∏ –£–ó–ò —Å–æ—Å—É–¥–æ–≤ –ø–æ –ø–æ–∫–∞–∑–∞–Ω–∏—è–º")
            recommendations.append("‚Ä¢ –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ—Ä–∞–ø–∏–∏")
        
    # –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
    recommendations.append("\nüö® <b>–ö–û–ì–î–ê –°–†–û–ß–ù–û –û–ë–†–ê–©–ê–¢–¨–°–Ø –ö –í–†–ê–ß–£:</b>")
    recommendations.append("‚Ä¢ –ë–æ–ª—å –≤ –≥—Ä—É–¥–∏, –æ—Å–æ–±–µ–Ω–Ω–æ —Å –∏—Ä—Ä–∞–¥–∏–∞—Ü–∏–µ–π –≤ —Ä—É–∫—É, —à–µ—é")
    recommendations.append("‚Ä¢ –û–¥—ã—à–∫–∞ –≤ –ø–æ–∫–æ–µ –∏–ª–∏ –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ")
    recommendations.append("‚Ä¢ –ê–î –≤—ã—à–µ 180/110 –º–º —Ä—Ç.—Å—Ç.")
    recommendations.append("‚Ä¢ –£—á–∞—â–µ–Ω–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ –≤ –ø–æ–∫–æ–µ (>100 —É–¥/–º–∏–Ω)")
    recommendations.append("‚Ä¢ –ì–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å –ø–æ—Ç–µ—Ä–µ–π —Å–æ–∑–Ω–∞–Ω–∏—è")
    recommendations.append("‚Ä¢ –û—Ç–µ–∫–∏ –Ω–æ–≥, –æ—Å–æ–±–µ–Ω–Ω–æ –∫ –≤–µ—á–µ—Ä—É")
    
    return "\n".join(recommendations)

def create_comprehensive_report(user_data: Dict, survey_data: Dict, test_data: Dict) -> str:
    """–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"""
    
    # –†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ —Ä–∏—Å–∫–∞
    risk_assessment = calculate_overall_cardiovascular_risk(user_data, survey_data, test_data)
    
    # –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    recommendations = generate_personalized_recommendations(risk_assessment, test_data)
    
    # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç—á–µ—Ç–∞
    report = f"""üìä <b>–ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –ü–û –ö–ê–†–î–ò–û–†–ò–°–ö–£</b>

üë§ <b>–£—á–∞—Å—Ç–Ω–∏–∫:</b> {user_data.get('name', '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å')}
üìÖ <b>–î–∞—Ç–∞:</b> {datetime.now().strftime('%d.%m.%Y')}

{risk_assessment['risk_color']} <b>–û–ë–©–ò–ô –£–†–û–í–ï–ù–¨ –†–ò–°–ö–ê: {risk_assessment['risk_level']}</b>
<b>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ —Ä–∏—Å–∫–∞:</b> {risk_assessment['risk_score']}
<b>–í—ã—è–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞:</b> {risk_assessment['factors_count']}

<b>üéØ –ö–õ–Æ–ß–ï–í–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:</b>
{risk_assessment['recommendation']}

üìã <b>–í–´–Ø–í–õ–ï–ù–ù–´–ï –§–ê–ö–¢–û–†–´ –†–ò–°–ö–ê:</b>"""

    if risk_assessment['risk_factors']:
        for i, factor in enumerate(risk_assessment['risk_factors'], 1):
            report += f"\n{i}. {factor}"
    else:
        report += "\n‚úÖ –ó–Ω–∞—á–∏–º—ã—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞ –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ"
    
    # –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
    report += "\n\nüìà <b>–î–ï–¢–ê–õ–¨–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–û–í:</b>"
    
    # HADS
    hads_anxiety = test_data.get('hads_anxiety_score')
    hads_depression = test_data.get('hads_depression_score')
    if hads_anxiety is not None and hads_depression is not None:
        report += f"\n\nüß† <b>–¢—Ä–µ–≤–æ–≥–∞ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏—è (HADS):</b>"
        report += f"\n‚Ä¢ –¢—Ä–µ–≤–æ–≥–∞: {hads_anxiety} –±–∞–ª–ª–æ–≤"
        report += f"\n‚Ä¢ –î–µ–ø—Ä–µ—Å—Å–∏—è: {hads_depression} –±–∞–ª–ª–æ–≤"
    
    # Burns
    burns_score = test_data.get('burns_score')
    if burns_score is not None:
        report += f"\n\nüíî <b>–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ (–ë–µ—Ä–Ω—Å):</b> {burns_score} –±–∞–ª–ª–æ–≤"
    
    # ISI
    isi_score = test_data.get('isi_score')
    if isi_score is not None:
        report += f"\n\nüò¥ <b>–ö–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞ (ISI):</b> {isi_score} –±–∞–ª–ª–æ–≤"
    
    # STOP-BANG
    stop_bang_score = test_data.get('stop_bang_score')
    if stop_bang_score is not None:
        report += f"\n\nüò™ <b>–†–∏—Å–∫ –∞–ø–Ω–æ—ç —Å–Ω–∞ (STOP-BANG):</b> {stop_bang_score} –±–∞–ª–ª–æ–≤"
    
    # ESS
    ess_score = test_data.get('ess_score')
    if ess_score is not None:
        report += f"\n\nü•± <b>–î–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å (ESS):</b> {ess_score} –±–∞–ª–ª–æ–≤"
    
    # Fagerstrom
    fagerstrom_score = test_data.get('fagerstrom_score')
    if fagerstrom_score is not None:
        report += f"\n\nüö¨ <b>–ù–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–§–∞–≥–µ—Ä—Å—Ç—Ä–µ–º):</b> {fagerstrom_score} –±–∞–ª–ª–æ–≤"
    elif test_data.get('fagerstrom_skipped'):
        report += f"\n\nüö¨ <b>–ù–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:</b> –Ω–µ –∫—É—Ä–∏—Ç"
    
    # AUDIT
    audit_score = test_data.get('audit_score')
    if audit_score is not None:
        report += f"\n\nüç∑ <b>–£–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è (AUDIT):</b> {audit_score} –±–∞–ª–ª–æ–≤"
    elif test_data.get('audit_skipped'):
        report += f"\n\nüç∑ <b>–£–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è:</b> –Ω–µ —É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç"
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    report += f"\n\n{recommendations}"
    
    # –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π
    report += f"""\n\nüìã <b>–ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô –ù–ê –ë–õ–ò–ñ–ê–ô–®–ò–ô –ú–ï–°–Ø–¶:</b>

üéØ <b>–ü–†–ò–û–†–ò–¢–ï–¢ 1:</b>"""
    
    priority_actions = []
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
    if test_data.get('fagerstrom_score', 0) >= 3:
        priority_actions.append("‚Ä¢ –ù–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫–∞–∑–∞ –æ—Ç –∫—É—Ä–µ–Ω–∏—è")
    
    if test_data.get('stop_bang_score', 0) >= 5:
        priority_actions.append("‚Ä¢ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ —Å–æ–º–Ω–æ–ª–æ–≥—É –Ω–∞ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ")
    
    if test_data.get('hads_anxiety_score', 0) >= 11 or test_data.get('hads_depression_score', 0) >= 11:
        priority_actions.append("‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç—É –∏–ª–∏ –ø—Å–∏—Ö–∏–∞—Ç—Ä—É")
    
    if risk_assessment['risk_level'] in ['–í–´–°–û–ö–ò–ô', '–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô']:
        priority_actions.append("‚Ä¢ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É –≤ —Ç–µ—á–µ–Ω–∏–µ 2 –Ω–µ–¥–µ–ª—å")
        priority_actions.append("‚Ä¢ –ù–∞—á–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ê–î")
    
    if test_data.get('isi_score', 0) >= 15:
        priority_actions.append("‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É –ø–æ –ø–æ–≤–æ–¥—É –±–µ—Å—Å–æ–Ω–Ω–∏—Ü—ã")
    
    if not priority_actions:
        priority_actions.append("‚Ä¢ –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏")
        priority_actions.append("‚Ä¢ –ü—Ä–æ–π—Ç–∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ—Å–º–æ—Ç—Ä —É —Ç–µ—Ä–∞–ø–µ–≤—Ç–∞")
    
    report += "\n" + "\n".join(priority_actions)
    
    report += f"""\n\nüéØ <b>–ü–†–ò–û–†–ò–¢–ï–¢ 2 (–≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞):</b>
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ (—Å—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∞—è –¥–∏–µ—Ç–∞)
‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–æ 150 –º–∏–Ω/–Ω–µ–¥–µ–ª—é
‚Ä¢ –ù–∞–ª–∞–¥–∏—Ç—å —Ä–µ–∂–∏–º —Å–Ω–∞ (7-9 —á–∞—Å–æ–≤)
‚Ä¢ –û—Å–≤–æ–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–µ—Å—Å–æ–º
‚Ä¢ –°–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∞–Ω–∞–ª–∏–∑—ã –∫—Ä–æ–≤–∏"""
    
    return report

# ============================================================================
# –ü–û–ü–£–õ–Ø–¶–ò–û–ù–ù–ê–Ø –ê–ù–ê–õ–ò–¢–ò–ö–ê
# ============================================================================

def analyze_population_risk(all_users_data: List[Dict]) -> str:
    """–ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ø—É–ª—è—Ü–∏–∏"""
    total_users = len(all_users_data)
    if total_users == 0:
        return "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤
    risk_distribution = {"–ù–ò–ó–ö–ò–ô": 0, "–£–ú–ï–†–ï–ù–ù–´–ô": 0, "–í–´–°–û–ö–ò–ô": 0, "–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô": 0}
    age_groups = {"18-30": 0, "31-45": 0, "46-60": 0, "60+": 0}
    gender_distribution = {"–ú—É–∂—Å–∫–æ–π": 0, "–ñ–µ–Ω—Å–∫–∏–π": 0}
    common_factors = {}
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–µ—Å—Ç–∞–º
    test_stats = {
        'hads_high_anxiety': 0,
        'hads_high_depression': 0,
        'burns_moderate_plus': 0,
        'isi_insomnia': 0,
        'stop_bang_high_risk': 0,
        'ess_excessive': 0,
        'fagerstrom_dependent': 0,
        'audit_risky': 0
    }
    
    for user_data in all_users_data:
        survey_data = user_data.get('survey', {})
        test_data = user_data.get('tests', {})
        user_info = user_data.get('user', {})
        
        # –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–∞
        risk_assessment = calculate_overall_cardiovascular_risk(user_info, survey_data, test_data)
        risk_distribution[risk_assessment['risk_level']] += 1
        
        # –í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã
        age = survey_data.get('age', 0)
        if 18 <= age <= 30:
            age_groups["18-30"] += 1
        elif 31 <= age <= 45:
            age_groups["31-45"] += 1
        elif 46 <= age <= 60:
            age_groups["46-60"] += 1
        elif age > 60:
            age_groups["60+"] += 1
        
        # –ü–æ–ª
        gender = survey_data.get('gender', '')
        if gender in gender_distribution:
            gender_distribution[gender] += 1
        
        # –§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞
        for factor in risk_assessment['risk_factors']:
            common_factors[factor] = common_factors.get(factor, 0) + 1
        
        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤
        if test_data.get('hads_anxiety_score', 0) >= 11:
            test_stats['hads_high_anxiety'] += 1
        if test_data.get('hads_depression_score', 0) >= 11:
            test_stats['hads_high_depression'] += 1
        if test_data.get('burns_score', 0) >= 11:
            test_stats['burns_moderate_plus'] += 1
        if test_data.get('isi_score', 0) >= 8:
            test_stats['isi_insomnia'] += 1
        if test_data.get('stop_bang_score', 0) >= 5:
            test_stats['stop_bang_high_risk'] += 1
        if test_data.get('ess_score', 0) >= 16:
            test_stats['ess_excessive'] += 1
        if test_data.get('fagerstrom_score', 0) >= 5:
            test_stats['fagerstrom_dependent'] += 1
        if test_data.get('audit_score', 0) >= 8:
            test_stats['audit_risky'] += 1
    
    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
    report = f"""üìà <b>–ü–û–ü–£–õ–Ø–¶–ò–û–ù–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–ê–†–î–ò–û–†–ò–°–ö–ê</b>
    
üë• <b>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:</b> {total_users}

üìä <b>–†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û –£–†–û–í–ù–Æ –†–ò–°–ö–ê:</b>"""
    
    for risk_level, count in risk_distribution.items():
        percentage = (count / total_users) * 100
        emoji = {"–ù–ò–ó–ö–ò–ô": "üü¢", "–£–ú–ï–†–ï–ù–ù–´–ô": "üü°", "–í–´–°–û–ö–ò–ô": "üü†", "–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô": "üî¥"}
        report += f"\n{emoji.get(risk_level, '‚Ä¢')} {risk_level}: {count} —á–µ–ª. ({percentage:.1f}%)"
    
    report += f"""\n\nüë®‚Äçüë©‚Äçüëß‚Äçüë¶ <b>–†–ê–°–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û –ü–û–õ–£:</b>"""
    for gender, count in gender_distribution.items():
        percentage = (count / total_users) * 100 if total_users > 0 else 0
        report += f"\n‚Ä¢ {gender}: {count} —á–µ–ª. ({percentage:.1f}%)"
    
    report += f"""\n\nüéÇ <b>–í–û–ó–†–ê–°–¢–ù–´–ï –ì–†–£–ü–ü–´:</b>"""
    for age_group, count in age_groups.items():
        percentage = (count / total_users) * 100 if total_users > 0 else 0
        report += f"\n‚Ä¢ {age_group} –ª–µ—Ç: {count} —á–µ–ª. ({percentage:.1f}%)"
    
    # –¢–æ–ø-5 —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞
    sorted_factors = sorted(common_factors.items(), key=lambda x: x[1], reverse=True)[:5]
    if sorted_factors:
        report += f"""\n\n‚ö†Ô∏è <b>–ù–ê–ò–ë–û–õ–ï–ï –ß–ê–°–¢–´–ï –§–ê–ö–¢–û–†–´ –†–ò–°–ö–ê:</b>"""
        for i, (factor, count) in enumerate(sorted_factors, 1):
            percentage = (count / total_users) * 100
            report += f"\n{i}. {factor}: {count} —á–µ–ª. ({percentage:.1f}%)"
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–µ—Å—Ç–∞–º
    report += f"""\n\nüß™ <b>–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û –¢–ï–°–¢–ê–ú:</b>"""
    test_labels = {
        'hads_high_anxiety': '–ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞',
        'hads_high_depression': '–ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è',
        'burns_moderate_plus': '–£–º–µ—Ä–µ–Ω–Ω–æ–µ+ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ',
        'isi_insomnia': '–ù–∞—Ä—É—à–µ–Ω–∏—è —Å–Ω–∞',
        'stop_bang_high_risk': '–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∞–ø–Ω–æ—ç',
        'ess_excessive': '–ß—Ä–µ–∑–º–µ—Ä–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å',
        'fagerstrom_dependent': '–ù–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å',
        'audit_risky': '–ü—Ä–æ–±–ª–µ–º—ã —Å –∞–ª–∫–æ–≥–æ–ª–µ–º'
    }
    
    for test_key, count in test_stats.items():
        if count > 0:
            percentage = (count / total_users) * 100
            label = test_labels.get(test_key, test_key)
            report += f"\n‚Ä¢ {label}: {count} —á–µ–ª. ({percentage:.1f}%)"
    
    # –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    high_risk_percentage = (risk_distribution["–í–´–°–û–ö–ò–ô"] + risk_distribution["–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô"]) / total_users * 100
    
    report += f"""\n\nüìã </b>–ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´:</b>"""
    
    if high_risk_percentage > 30:
        report += f"\nüî¥ –í—ã—Å–æ–∫–∞—è –¥–æ–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º —Ä–∏—Å–∫–æ–º ({high_risk_percentage:.1f}%)"
    elif high_risk_percentage > 15:
        report += f"\nüü° –£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–æ–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º —Ä–∏—Å–∫–æ–º ({high_risk_percentage:.1f}%)"
    else:
        report += f"\nüü¢ –ù–∏–∑–∫–∞—è –¥–æ–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º —Ä–∏—Å–∫–æ–º ({high_risk_percentage:.1f}%)"
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
    priority_issues = []
    if test_stats['stop_bang_high_risk'] / total_users > 0.2:
        priority_issues.append("–Ω–∞—Ä—É—à–µ–Ω–∏—è –¥—ã—Ö–∞–Ω–∏—è –≤–æ —Å–Ω–µ")
    if test_stats['hads_high_anxiety'] / total_users > 0.15:
        priority_issues.append("—Ç—Ä–µ–≤–æ–∂–Ω—ã–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞")
    if test_stats['hads_high_depression'] / total_users > 0.15:
        priority_issues.append("–¥–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–∞")
    if test_stats['fagerstrom_dependent'] / total_users > 0.1:
        priority_issues.append("–Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
    
    if priority_issues:
        report += f"\n\nüéØ <b>–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:</b> {', '.join(priority_issues)}"
    
    return report

# ============================================================================
# –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
# ============================================================================

def get_test_norms() -> Dict[str, Dict[str, Tuple[int, int]]]:
    """–ü–æ–ª—É—á–∏—Ç—å –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤"""
    return TEST_NORMS

def get_risk_category(test_name: str, score: int) -> str:
    """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ä–∏—Å–∫–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞"""
    if test_name not in TEST_NORMS:
        return "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"
    
    norms = TEST_NORMS[test_name]
    for category, (min_val, max_val) in norms.items():
        if min_val <= score <= max_val:
            return category
    
    return "–≤–Ω–µ –Ω–æ—Ä–º—ã"

def calculate_test_percentile(test_name: str, score: int, population_scores: List[int]) -> int:
    """–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞"""
    if not population_scores:
        return 50
    
    sorted_scores = sorted(population_scores)
    position = sum(1 for s in sorted_scores if s <= score)
    percentile = (position / len(sorted_scores)) * 100
    
    return int(percentile)

def export_test_summary(user_data: Dict, survey_data: Dict, test_data: Dict) -> Dict[str, Any]:
    """–≠–∫—Å–ø–æ—Ä—Ç –∫—Ä–∞—Ç–∫–æ–π —Å–≤–æ–¥–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º"""
    risk_assessment = calculate_overall_cardiovascular_risk(user_data, survey_data, test_data)
    
    return {
        'user_id': user_data.get('telegram_id'),
        'name': user_data.get('name'),
        'assessment_date': datetime.now().isoformat(),
        'overall_risk': {
            'level': risk_assessment['risk_level'],
            'score': risk_assessment['risk_score'],
            'factors_count': risk_assessment['factors_count']
        },
        'test_results': {
            'hads_anxiety': test_data.get('hads_anxiety_score'),
            'hads_depression': test_data.get('hads_depression_score'),
            'burns': test_data.get('burns_score'),
            'isi': test_data.get('isi_score'),
            'stop_bang': test_data.get('stop_bang_score'),
            'ess': test_data.get('ess_score'),
            'fagerstrom': test_data.get('fagerstrom_score'),
            'audit': test_data.get('audit_score')
        },
        'risk_factors': risk_assessment['risk_factors'],
        'urgent_referrals': _get_urgent_referrals(test_data),
        'recommendations_summary': _get_recommendations_summary(risk_assessment, test_data)
    }

def _get_urgent_referrals(test_data: Dict) -> List[str]:
    """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ä–æ—á–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º"""
    referrals = []
    
    if test_data.get('hads_anxiety_score', 0) >= 11 or test_data.get('hads_depression_score', 0) >= 11:
        referrals.append("–ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç")
    
    if test_data.get('stop_bang_score', 0) >= 5:
        referrals.append("—Å–æ–º–Ω–æ–ª–æ–≥")
    
    if test_data.get('isi_score', 0) >= 15:
        referrals.append("–Ω–µ–≤—Ä–æ–ª–æ–≥")
    
    if test_data.get('fagerstrom_score', 0) >= 7:
        referrals.append("–Ω–∞—Ä–∫–æ–ª–æ–≥")
    
    if test_data.get('audit_score', 0) >= 20:
        referrals.append("–Ω–∞—Ä–∫–æ–ª–æ–≥")
    
    return referrals

def _get_recommendations_summary(risk_assessment: Dict, test_data: Dict) -> List[str]:
    """–ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π"""
    recommendations = []
    
    if risk_assessment['risk_level'] in ['–í–´–°–û–ö–ò–ô', '–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô']:
        recommendations.append("–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞")
        recommendations.append("–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ê–î")
    
    if test_data.get('fagerstrom_score', 0) > 0:
        recommendations.append("–æ—Ç–∫–∞–∑ –æ—Ç –∫—É—Ä–µ–Ω–∏—è")
    
    if test_data.get('audit_score', 0) >= 8:
        recommendations.append("—Å–Ω–∏–∂–µ–Ω–∏–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∞–ª–∫–æ–≥–æ–ª—è")
    
    if test_data.get('isi_score', 0) >= 8:
        recommendations.append("—É–ª—É—á—à–µ–Ω–∏–µ –≥–∏–≥–∏–µ–Ω—ã —Å–Ω–∞")
    
    if test_data.get('hads_anxiety_score', 0) >= 8:
        recommendations.append("—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ—Å—Å–æ–º")
    
    return recommendations

def get_risk_category(test_type: str, score: int) -> str:
    """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∏—Å–∫–∞ –ø–æ –±–∞–ª–ª–∞–º —Ç–µ—Å—Ç–∞"""
    
    if test_type == 'hads_anxiety':
        if score <= 7:
            return '–Ω–æ—Ä–º–∞'
        elif score <= 10:
            return '—Å—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è'
        else:
            return '–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è'
    
    elif test_type == 'hads_depression':
        if score <= 7:
            return '–Ω–æ—Ä–º–∞'
        elif score <= 10:
            return '—Å—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è'
        else:
            return '–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è'
    
    elif test_type == 'burns':
        if score <= 5:
            return '–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è'
        elif score <= 10:
            return '–ª–µ–≥–∫–∞—è'
        elif score <= 25:
            return '—É–º–µ—Ä–µ–Ω–Ω–∞—è'
        elif score <= 50:
            return '—Ç—è–∂–µ–ª–∞—è'
        else:
            return '–∫—Ä–∞–π–Ω–µ_—Ç—è–∂–µ–ª–∞—è'
    
    elif test_type == 'isi':
        if score <= 7:
            return '–Ω–µ—Ç_–±–µ—Å—Å–æ–Ω–Ω–∏—Ü—ã'
        elif score <= 14:
            return '–ø–æ–¥–ø–æ—Ä–æ–≥–æ–≤–∞—è'
        elif score <= 21:
            return '—É–º–µ—Ä–µ–Ω–Ω–∞—è'
        else:
            return '—Ç—è–∂–µ–ª–∞—è'
    
    elif test_type == 'stop_bang':
        if score <= 2:
            return '–Ω–∏–∑–∫–∏–π'
        elif score <= 4:
            return '—É–º–µ—Ä–µ–Ω–Ω—ã–π'
        else:
            return '–≤—ã—Å–æ–∫–∏–π'
    
    elif test_type == 'ess':
        if score <= 10:
            return '–Ω–æ—Ä–º–∞'
        elif score <= 12:
            return '–ª–µ–≥–∫–∞—è'
        elif score <= 15:
            return '—É–º–µ—Ä–µ–Ω–Ω–∞—è'
        else:
            return '–≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è'
    
    elif test_type == 'fagerstrom':
        if score <= 2:
            return '–æ—á–µ–Ω—å_—Å–ª–∞–±–∞—è'
        elif score <= 4:
            return '—Å–ª–∞–±–∞—è'
        elif score <= 6:
            return '—Å—Ä–µ–¥–Ω—è—è'
        elif score <= 8:
            return '—Å–∏–ª—å–Ω–∞—è'
        else:
            return '–æ—á–µ–Ω—å_—Å–∏–ª—å–Ω–∞—è'
    
    elif test_type == 'audit':
        if score <= 7:
            return '–Ω–∏–∑–∫–∏–π'
        elif score <= 15:
            return '–æ–ø–∞—Å–Ω–æ–µ'
        elif score <= 19:
            return '–≤—Ä–µ–¥–Ω–æ–µ'
        else:
            return '–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'
    
    return '–Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ'

def calculate_overall_cardiovascular_risk(user_data: dict, survey_data: dict, test_data: dict) -> dict:
    """–†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–≥–æ —Ä–∏—Å–∫–∞"""
    
    risk_factors = []
    risk_score = 0
    
    # –î–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞
    age = survey_data.get('age', 0)
    if age > 45:
        risk_factors.append("–í–æ–∑—Ä–∞—Å—Ç —Å—Ç–∞—Ä—à–µ 45 –ª–µ—Ç")
        risk_score += 2
    elif age > 35:
        risk_factors.append("–í–æ–∑—Ä–∞—Å—Ç —Å—Ç–∞—Ä—à–µ 35 –ª–µ—Ç")
        risk_score += 1
    
    if survey_data.get('gender') == '–ú—É–∂—Å–∫–æ–π':
        risk_factors.append("–ú—É–∂—Å–∫–æ–π –ø–æ–ª")
        risk_score += 1
    
    # –ê–Ω–∞–º–Ω–µ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã
    if survey_data.get('heart_disease') == '–î–∞':
        risk_factors.append("–ó–∞–±–æ–ª–µ–≤–∞–Ω–∏—è —Å–µ—Ä–¥—Ü–∞ –≤ –∞–Ω–∞–º–Ω–µ–∑–µ")
        risk_score += 4
    
    # –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∏ —Ä–∏—Å–∫–∞
    health_rating = survey_data.get('health_rating', 10)
    if health_rating <= 5:
        risk_factors.append("–ù–∏–∑–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è")
        risk_score += 1
    
    cv_risk = survey_data.get('cv_risk', '')
    if cv_risk == '–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π':
        risk_factors.append("–í—ã—Å–æ–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–≥–æ —Ä–∏—Å–∫–∞")
        risk_score += 2
    elif cv_risk == '–≤—ã—Å–æ–∫–∏–π':
        risk_factors.append("–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–≥–æ —Ä–∏—Å–∫–∞")
        risk_score += 1
    
    # –ü—Å–∏—Ö–æ—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã
    hads_anxiety = test_data.get('hads_anxiety_score', 0)
    if hads_anxiety and hads_anxiety >= 11:
        risk_factors.append("–ö–ª–∏–Ω–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–∞—è —Ç—Ä–µ–≤–æ–≥–∞")
        risk_score += 2
    elif hads_anxiety and hads_anxiety >= 8:
        risk_factors.append("–°—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞")
        risk_score += 1
    
    hads_depression = test_data.get('hads_depression_score', 0)
    if hads_depression and hads_depression >= 11:
        risk_factors.append("–ö–ª–∏–Ω–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è")
        risk_score += 3
    elif hads_depression and hads_depression >= 8:
        risk_factors.append("–°—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –¥–µ–ø—Ä–µ—Å—Å–∏—è")
        risk_score += 1
    
    burns_score = test_data.get('burns_score', 0)
    if burns_score and burns_score >= 25:
        risk_factors.append("–í—ã—Ä–∞–∂–µ–Ω–Ω–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ")
        risk_score += 2
    elif burns_score and burns_score >= 11:
        risk_factors.append("–£–º–µ—Ä–µ–Ω–Ω–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ")
        risk_score += 1
    
    # –ù–∞—Ä—É—à–µ–Ω–∏—è —Å–Ω–∞
    isi_score = test_data.get('isi_score', 0)
    if isi_score and isi_score >= 15:
        risk_factors.append("–ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞")
        risk_score += 2
    elif isi_score and isi_score >= 8:
        risk_factors.append("–°—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞")
        risk_score += 1
    
    stop_bang_score = test_data.get('stop_bang_score', 0)
    if stop_bang_score and stop_bang_score >= 5:
        risk_factors.append("–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∞–ø–Ω–æ—ç —Å–Ω–∞")
        risk_score += 3
    elif stop_bang_score and stop_bang_score >= 3:
        risk_factors.append("–£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫ –∞–ø–Ω–æ—ç —Å–Ω–∞")
        risk_score += 1
    
    ess_score = test_data.get('ess_score', 0)
    if ess_score and ess_score >= 16:
        risk_factors.append("–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –¥–Ω–µ–≤–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å")
        risk_score += 1
    
    # –í—Ä–µ–¥–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏
    fagerstrom_score = test_data.get('fagerstrom_score')
    if fagerstrom_score and fagerstrom_score >= 7:
        risk_factors.append("–°–∏–ª—å–Ω–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 4
    elif fagerstrom_score and fagerstrom_score >= 5:
        risk_factors.append("–£–º–µ—Ä–µ–Ω–Ω–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 3
    elif fagerstrom_score and fagerstrom_score >= 3:
        risk_factors.append("–°–ª–∞–±–∞—è –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 2
    elif fagerstrom_score and fagerstrom_score > 0:
        risk_factors.append("–ö—É—Ä–µ–Ω–∏–µ")
        risk_score += 1
    
    audit_score = test_data.get('audit_score')
    if audit_score and audit_score >= 20:
        risk_factors.append("–í–æ–∑–º–æ–∂–Ω–∞—è –∞–ª–∫–æ–≥–æ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å")
        risk_score += 3
    elif audit_score and audit_score >= 16:
        risk_factors.append("–í—Ä–µ–¥–Ω–æ–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è")
        risk_score += 2
    elif audit_score and audit_score >= 8:
        risk_factors.append("–û–ø–∞—Å–Ω–æ–µ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è")
        risk_score += 1
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞
    if risk_score <= 3:
        risk_level = "–ù–ò–ó–ö–ò–ô"
        risk_color = "üü¢"
        recommendation = "–í–∞—à —Ä–∏—Å–∫ —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –Ω–∏–∑–∫–∏–π. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤–µ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏."
    elif risk_score <= 6:
        risk_level = "–£–ú–ï–†–ï–ù–ù–´–ô"
        risk_color = "üü°"
        recommendation = "–£ –≤–∞—Å —É–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏."
    elif risk_score <= 10:
        risk_level = "–í–´–°–û–ö–ò–ô"
        risk_color = "üü†"
        recommendation = "–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫! –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ —Å—Ä–æ—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞ –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ."
    else:
        risk_level = "–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô"
        risk_color = "üî¥"
        recommendation = "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫! –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è."
    
    return {
        'risk_score': risk_score,
        'risk_level': risk_level,
        'risk_color': risk_color,
        'factors_count': len(risk_factors),
        'risk_factors': risk_factors,
        'recommendation': recommendation
    }